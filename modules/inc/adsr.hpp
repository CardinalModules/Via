/** \file calib.hpp
 * \brief Calibration module implementation.
 *
 *  A module implementing a simple testing/calibration helper program that serves as a template.
 */

#ifdef BUILD_F373

#ifndef INC_Calib_HPP_
#define INC_Calib_HPP_

#include "user_interface.hpp"
#include <via_platform_binding.hpp>
#include <oscillators.hpp>

/// Macro used to specify the number of samples to per DAC transfer.
#define VIA_ADSR_BUFFER_SIZE 32

/// Callback to link to the C code in the STM32 Touch Sense Library.
void adsrTouchLink (void *);

/// Calibration/template module class.

/** A simple self calibration tool that doubles as an introductory template.*/
class ViaAdsr : public ViaModule {

public:

	/// Calibration UI implementation.
	/**
	 * Override virtual methods in the UI drivers to implement the touch interface.
	 * I believe this should use template meta-programming instead of virtual functions because specific functionality is determined at compile time.
	 * One C++ trick at a time for now.
	 **/

	class ViaAdsrUI: public ViaUI {

	public:

		/**
		 * Pointer to the outer class to allow access to data and methods.
		 * See constructor and outer class constructor for details.
		 */
		ViaAdsr& this_module;


		//@{
		/// Functions to handle a tap event on a touch sensor or shift combo.
		void button1TapCallback(void) override;
		void button2TapCallback(void) override;
		void button3TapCallback(void) override;
		void button4TapCallback(void) override;
		void button5TapCallback(void) override;
		void button6TapCallback(void) override;

		void aux1TapCallback(void) override;
		void aux2TapCallback(void) override;
		void aux2AltTapCallback(void) override;
		void aux3TapCallback(void) override;
		void aux4TapCallback(void) override;
		//@}

		//@{
		/// Functions to handle a hold event on a touch sensor or shift combo.
		void button1HoldCallback(void) override;
		void button2HoldCallback(void) override;
		void button3HoldCallback(void) override;
		void button4HoldCallback(void) override;
		void button5HoldCallback(void) override;
		void button6HoldCallback(void) override;

		void aux1HoldCallback(void) override;
		void aux2HoldCallback(void) override;
		void aux2AltHoldCallback(void) override;
		void aux3HoldCallback(void) override;
		void aux4HoldCallback(void) override;
		//@}

		//@{
		/// A method to access the LED control functions of this_module in the UI driver.
		void uiSetLEDs(int) override;
		//@}

		//@{
		/// A method to recall the module's last state at power on or restore presets.
		void recallModuleState(void) override;
		//@}

		//@{
		/// Methods to handle entry transitions into the main module states.
		void defaultEnterMenuCallback(void) override;
		void newModeEnterMenuCallback(void) override;
		void newAuxModeEnterMenuCallback(void) override;
		void presetEnterMenuCallback(void) override;
		//@}

		//@{
		/// Methods to handle entry transitions into touch sensor menu states.
		void button1EnterMenuCallback(void) override;
		void button2EnterMenuCallback(void) override;
		void button3EnterMenuCallback(void) override;
		void button4EnterMenuCallback(void) override;
		void button5EnterMenuCallback(void) override;
		void button6EnterMenuCallback(void) override;

		void aux1EnterMenuCallback(void) override;
		void aux2EnterMenuCallback(void) override;
		void aux2AltEnterMenuCallback(void) override;
		void aux3EnterMenuCallback(void) override;
		void aux4EnterMenuCallback(void) override;
		//@}

		/// A method to handle any initialization that needs to be done after some or all of the outer class constructor.
		void initialize(void) override;

		/// A utility method to write the factory presets from memory.
		void writeStockPresets(void) override {}

		/// On construction, link the calibTouchLink callback to the STM32 touch sense library.
		ViaAdsrUI(ViaAdsr& x): this_module(x) {
			linkUI((void *) &adsrTouchLink, (void *) this);
		}

		//@{
		/// Some firmware-specific data members used to register touch events on each sensor for testing.
		int32_t touch1OK = 0;
		int32_t touch2OK = 0;
		int32_t touch3OK = 0;
		int32_t touch4OK = 0;
		int32_t touch5OK = 0;
		int32_t touch6OK = 0;
		///

	};

	/// An instance of the UI implementation.
	ViaAdsrUI adsrUI;

	/// A member that the UI implementation can use to turn the module's runtime display off.
	int32_t runtimeDisplay = 1;

	/// A utility method to pass UI interaction events to the touch sense library.
	/// Called in the executable code in user_interrupts.c.
	/// For some reason I have it wrapped like this?
	/// Perhaps the C code in the hardware executable mangled the namespace? Gotta check.
	void ui_dispatch(int32_t sig) {
		this->adsrUI.dispatch(sig);
	};


	/*
	 *
	 * State functions
	 *
	 */

#define MAX_PHASE 0xFFFFFFF

	static constexpr int32_t expoSlope[4097] = {0, 0, 0, 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 7, 7, 7, 8, 8, 8, 9, 9, 9, 10, 10, 11, 11, 11, 12, 12, 12, 13, 13, 13, 14, 14, 15, 15, 15, 16, 16, 16, 17, 17, 17, 18, 18, 19, 19, 19, 20, 20, 20, 21, 21, 22, 22, 22, 23, 23, 24, 24, 24, 25, 25, 25, 26, 26, 27, 27, 27, 28, 28, 29, 29, 29, 30, 30, 30, 31, 31, 32, 32, 32, 33, 33, 34, 34, 34, 35, 35, 36, 36, 36, 37, 37, 38, 38, 38, 39, 39, 40, 40, 40, 41, 41, 42, 42, 42, 43, 43, 44, 44, 44, 45, 45, 46, 46, 46, 47, 47, 48, 48, 49, 49, 49, 50, 50, 51, 51, 51, 52, 52, 53, 53, 54, 54, 54, 55, 55, 56, 56, 57, 57, 57, 58, 58, 59, 59, 60, 60, 60, 61, 61, 62, 62, 63, 63, 63, 64, 64, 65, 65, 66, 66, 66, 67, 67, 68, 68, 69, 69, 70, 70, 70, 71, 71, 72, 72, 73, 73, 74, 74, 74, 75, 75, 76, 76, 77, 77, 78, 78, 79, 79, 79, 80, 80, 81, 81, 82, 82, 83, 83, 84, 84, 84, 85, 85, 86, 86, 87, 87, 88, 88, 89, 89, 90, 90, 91, 91, 91, 92, 92, 93, 93, 94, 94, 95, 95, 96, 96, 97, 97, 98, 98, 99, 99, 100, 100, 101, 101, 102, 102, 103, 103, 104, 104, 104, 105, 105, 106, 106, 107, 107, 108, 108, 109, 109, 110, 110, 111, 111, 112, 112, 113, 113, 114, 114, 115, 115, 116, 116, 117, 117, 118, 118, 119, 119, 120, 121, 121, 122, 122, 123, 123, 124, 124, 125, 125, 126, 126, 127, 127, 128, 128, 129, 129, 130, 130, 131, 131, 132, 132, 133, 134, 134, 135, 135, 136, 136, 137, 137, 138, 138, 139, 139, 140, 140, 141, 142, 142, 143, 143, 144, 144, 145, 145, 146, 146, 147, 148, 148, 149, 149, 150, 150, 151, 151, 152, 152, 153, 154, 154, 155, 155, 156, 156, 157, 158, 158, 159, 159, 160, 160, 161, 161, 162, 163, 163, 164, 164, 165, 165, 166, 167, 167, 168, 168, 169, 169, 170, 171, 171, 172, 172, 173, 174, 174, 175, 175, 176, 176, 177, 178, 178, 179, 179, 180, 181, 181, 182, 182, 183, 184, 184, 185, 185, 186, 187, 187, 188, 188, 189, 190, 190, 191, 191, 192, 193, 193, 194, 194, 195, 196, 196, 197, 198, 198, 199, 199, 200, 201, 201, 202, 202, 203, 204, 204, 205, 206, 206, 207, 208, 208, 209, 209, 210, 211, 211, 212, 213, 213, 214, 214, 215, 216, 216, 217, 218, 218, 219, 220, 220, 221, 222, 222, 223, 224, 224, 225, 225, 226, 227, 227, 228, 229, 229, 230, 231, 231, 232, 233, 233, 234, 235, 235, 236, 237, 237, 238, 239, 239, 240, 241, 241, 242, 243, 243, 244, 245, 245, 246, 247, 248, 248, 249, 250, 250, 251, 252, 252, 253, 254, 254, 255, 256, 257, 257, 258, 259, 259, 260, 261, 261, 262, 263, 264, 264, 265, 266, 266, 267, 268, 268, 269, 270, 271, 271, 272, 273, 273, 274, 275, 276, 276, 277, 278, 279, 279, 280, 281, 281, 282, 283, 284, 284, 285, 286, 287, 287, 288, 289, 290, 290, 291, 292, 292, 293, 294, 295, 295, 296, 297, 298, 298, 299, 300, 301, 302, 302, 303, 304, 305, 305, 306, 307, 308, 308, 309, 310, 311, 311, 312, 313, 314, 315, 315, 316, 317, 318, 318, 319, 320, 321, 322, 322, 323, 324, 325, 325, 326, 327, 328, 329, 329, 330, 331, 332, 333, 333, 334, 335, 336, 337, 337, 338, 339, 340, 341, 341, 342, 343, 344, 345, 346, 346, 347, 348, 349, 350, 350, 351, 352, 353, 354, 355, 355, 356, 357, 358, 359, 360, 360, 361, 362, 363, 364, 365, 365, 366, 367, 368, 369, 370, 371, 371, 372, 373, 374, 375, 376, 377, 377, 378, 379, 380, 381, 382, 383, 383, 384, 385, 386, 387, 388, 389, 390, 390, 391, 392, 393, 394, 395, 396, 397, 397, 398, 399, 400, 401, 402, 403, 404, 405, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 540, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 553, 554, 555, 556, 557, 558, 559, 560, 561, 562, 564, 565, 566, 567, 568, 569, 570, 571, 573, 574, 575, 576, 577, 578, 579, 580, 582, 583, 584, 585, 586, 587, 588, 590, 591, 592, 593, 594, 595, 596, 598, 599, 600, 601, 602, 603, 605, 606, 607, 608, 609, 610, 612, 613, 614, 615, 616, 618, 619, 620, 621, 622, 623, 625, 626, 627, 628, 629, 631, 632, 633, 634, 635, 637, 638, 639, 640, 642, 643, 644, 645, 646, 648, 649, 650, 651, 653, 654, 655, 656, 658, 659, 660, 661, 662, 664, 665, 666, 667, 669, 670, 671, 673, 674, 675, 676, 678, 679, 680, 681, 683, 684, 685, 686, 688, 689, 690, 692, 693, 694, 695, 697, 698, 699, 701, 702, 703, 705, 706, 707, 708, 710, 711, 712, 714, 715, 716, 718, 719, 720, 722, 723, 724, 726, 727, 728, 730, 731, 732, 734, 735, 736, 738, 739, 740, 742, 743, 744, 746, 747, 748, 750, 751, 753, 754, 755, 757, 758, 759, 761, 762, 764, 765, 766, 768, 769, 771, 772, 773, 775, 776, 777, 779, 780, 782, 783, 785, 786, 787, 789, 790, 792, 793, 794, 796, 797, 799, 800, 802, 803, 804, 806, 807, 809, 810, 812, 813, 815, 816, 817, 819, 820, 822, 823, 825, 826, 828, 829, 831, 832, 834, 835, 837, 838, 840, 841, 842, 844, 845, 847, 848, 850, 851, 853, 854, 856, 857, 859, 861, 862, 864, 865, 867, 868, 870, 871, 873, 874, 876, 877, 879, 880, 882, 883, 885, 887, 888, 890, 891, 893, 894, 896, 897, 899, 901, 902, 904, 905, 907, 908, 910, 912, 913, 915, 916, 918, 920, 921, 923, 924, 926, 928, 929, 931, 932, 934, 936, 937, 939, 940, 942, 944, 945, 947, 949, 950, 952, 953, 955, 957, 958, 960, 962, 963, 965, 967, 968, 970, 972, 973, 975, 977, 978, 980, 982, 983, 985, 987, 988, 990, 992, 993, 995, 997, 999, 1000, 1002, 1004, 1005, 1007, 1009, 1011, 1012, 1014, 1016, 1017, 1019, 1021, 1023, 1024, 1026, 1028, 1030, 1031, 1033, 1035, 1037, 1038, 1040, 1042, 1044, 1045, 1047, 1049, 1051, 1052, 1054, 1056, 1058, 1060, 1061, 1063, 1065, 1067, 1068, 1070, 1072, 1074, 1076, 1077, 1079, 1081, 1083, 1085, 1087, 1088, 1090, 1092, 1094, 1096, 1097, 1099, 1101, 1103, 1105, 1107, 1109, 1110, 1112, 1114, 1116, 1118, 1120, 1122, 1123, 1125, 1127, 1129, 1131, 1133, 1135, 1137, 1138, 1140, 1142, 1144, 1146, 1148, 1150, 1152, 1154, 1156, 1157, 1159, 1161, 1163, 1165, 1167, 1169, 1171, 1173, 1175, 1177, 1179, 1181, 1183, 1185, 1187, 1188, 1190, 1192, 1194, 1196, 1198, 1200, 1202, 1204, 1206, 1208, 1210, 1212, 1214, 1216, 1218, 1220, 1222, 1224, 1226, 1228, 1230, 1232, 1234, 1236, 1238, 1240, 1242, 1244, 1246, 1248, 1250, 1252, 1255, 1257, 1259, 1261, 1263, 1265, 1267, 1269, 1271, 1273, 1275, 1277, 1279, 1281, 1283, 1286, 1288, 1290, 1292, 1294, 1296, 1298, 1300, 1302, 1304, 1307, 1309, 1311, 1313, 1315, 1317, 1319, 1321, 1324, 1326, 1328, 1330, 1332, 1334, 1337, 1339, 1341, 1343, 1345, 1347, 1350, 1352, 1354, 1356, 1358, 1360, 1363, 1365, 1367, 1369, 1371, 1374, 1376, 1378, 1380, 1382, 1385, 1387, 1389, 1391, 1394, 1396, 1398, 1400, 1403, 1405, 1407, 1409, 1412, 1414, 1416, 1418, 1421, 1423, 1425, 1427, 1430, 1432, 1434, 1437, 1439, 1441, 1444, 1446, 1448, 1450, 1453, 1455, 1457, 1460, 1462, 1464, 1467, 1469, 1471, 1474, 1476, 1478, 1481, 1483, 1485, 1488, 1490, 1493, 1495, 1497, 1500, 1502, 1504, 1507, 1509, 1512, 1514, 1516, 1519, 1521, 1524, 1526, 1528, 1531, 1533, 1536, 1538, 1541, 1543, 1545, 1548, 1550, 1553, 1555, 1558, 1560, 1563, 1565, 1568, 1570, 1573, 1575, 1577, 1580, 1582, 1585, 1587, 1590, 1592, 1595, 1597, 1600, 1603, 1605, 1608, 1610, 1613, 1615, 1618, 1620, 1623, 1625, 1628, 1630, 1633, 1636, 1638, 1641, 1643, 1646, 1648, 1651, 1654, 1656, 1659, 1661, 1664, 1667, 1669, 1672, 1674, 1677, 1680, 1682, 1685, 1687, 1690, 1693, 1695, 1698, 1701, 1703, 1706, 1709, 1711, 1714, 1717, 1719, 1722, 1725, 1727, 1730, 1733, 1735, 1738, 1741, 1744, 1746, 1749, 1752, 1754, 1757, 1760, 1763, 1765, 1768, 1771, 1774, 1776, 1779, 1782, 1785, 1787, 1790, 1793, 1796, 1799, 1801, 1804, 1807, 1810, 1812, 1815, 1818, 1821, 1824, 1827, 1829, 1832, 1835, 1838, 1841, 1844, 1846, 1849, 1852, 1855, 1858, 1861, 1864, 1866, 1869, 1872, 1875, 1878, 1881, 1884, 1887, 1890, 1892, 1895, 1898, 1901, 1904, 1907, 1910, 1913, 1916, 1919, 1922, 1925, 1928, 1931, 1934, 1937, 1940, 1942, 1945, 1948, 1951, 1954, 1957, 1960, 1963, 1966, 1969, 1972, 1975, 1979, 1982, 1985, 1988, 1991, 1994, 1997, 2000, 2003, 2006, 2009, 2012, 2015, 2018, 2021, 2024, 2027, 2031, 2034, 2037, 2040, 2043, 2046, 2049, 2052, 2055, 2059, 2062, 2065, 2068, 2071, 2074, 2078, 2081, 2084, 2087, 2090, 2093, 2097, 2100, 2103, 2106, 2109, 2113, 2116, 2119, 2122, 2125, 2129, 2132, 2135, 2138, 2142, 2145, 2148, 2151, 2155, 2158, 2161, 2164, 2168, 2171, 2174, 2178, 2181, 2184, 2188, 2191, 2194, 2197, 2201, 2204, 2207, 2211, 2214, 2217, 2221, 2224, 2228, 2231, 2234, 2238, 2241, 2244, 2248, 2251, 2255, 2258, 2261, 2265, 2268, 2272, 2275, 2279, 2282, 2285, 2289, 2292, 2296, 2299, 2303, 2306, 2310, 2313, 2317, 2320, 2324, 2327, 2331, 2334, 2338, 2341, 2345, 2348, 2352, 2355, 2359, 2362, 2366, 2369, 2373, 2377, 2380, 2384, 2387, 2391, 2394, 2398, 2402, 2405, 2409, 2412, 2416, 2420, 2423, 2427, 2431, 2434, 2438, 2441, 2445, 2449, 2452, 2456, 2460, 2464, 2467, 2471, 2475, 2478, 2482, 2486, 2489, 2493, 2497, 2501, 2504, 2508, 2512, 2516, 2519, 2523, 2527, 2531, 2534, 2538, 2542, 2546, 2550, 2553, 2557, 2561, 2565, 2569, 2572, 2576, 2580, 2584, 2588, 2592, 2596, 2599, 2603, 2607, 2611, 2615, 2619, 2623, 2627, 2631, 2634, 2638, 2642, 2646, 2650, 2654, 2658, 2662, 2666, 2670, 2674, 2678, 2682, 2686, 2690, 2694, 2698, 2702, 2706, 2710, 2714, 2718, 2722, 2726, 2730, 2734, 2738, 2742, 2746, 2750, 2754, 2758, 2762, 2767, 2771, 2775, 2779, 2783, 2787, 2791, 2795, 2799, 2804, 2808, 2812, 2816, 2820, 2824, 2829, 2833, 2837, 2841, 2845, 2850, 2854, 2858, 2862, 2866, 2871, 2875, 2879, 2883, 2888, 2892, 2896, 2900, 2905, 2909, 2913, 2918, 2922, 2926, 2931, 2935, 2939, 2943, 2948, 2952, 2957, 2961, 2965, 2970, 2974, 2978, 2983, 2987, 2992, 2996, 3000, 3005, 3009, 3014, 3018, 3022, 3027, 3031, 3036, 3040, 3045, 3049, 3054, 3058, 3063, 3067, 3072, 3076, 3081, 3085, 3090, 3094, 3099, 3103, 3108, 3112, 3117, 3122, 3126, 3131, 3135, 3140, 3145, 3149, 3154, 3158, 3163, 3168, 3172, 3177, 3182, 3186, 3191, 3196, 3200, 3205, 3210, 3214, 3219, 3224, 3228, 3233, 3238, 3243, 3247, 3252, 3257, 3262, 3266, 3271, 3276, 3281, 3286, 3290, 3295, 3300, 3305, 3310, 3314, 3319, 3324, 3329, 3334, 3339, 3344, 3348, 3353, 3358, 3363, 3368, 3373, 3378, 3383, 3388, 3393, 3398, 3403, 3408, 3412, 3417, 3422, 3427, 3432, 3437, 3442, 3447, 3452, 3457, 3463, 3468, 3473, 3478, 3483, 3488, 3493, 3498, 3503, 3508, 3513, 3518, 3523, 3529, 3534, 3539, 3544, 3549, 3554, 3559, 3565, 3570, 3575, 3580, 3585, 3591, 3596, 3601, 3606, 3611, 3617, 3622, 3627, 3632, 3638, 3643, 3648, 3654, 3659, 3664, 3670, 3675, 3680, 3685, 3691, 3696, 3702, 3707, 3712, 3718, 3723, 3728, 3734, 3739, 3745, 3750, 3756, 3761, 3766, 3772, 3777, 3783, 3788, 3794, 3799, 3805, 3810, 3816, 3821, 3827, 3832, 3838, 3843, 3849, 3855, 3860, 3866, 3871, 3877, 3882, 3888, 3894, 3899, 3905, 3911, 3916, 3922, 3928, 3933, 3939, 3945, 3950, 3956, 3962, 3967, 3973, 3979, 3985, 3990, 3996, 4002, 4008, 4013, 4019, 4025, 4031, 4037, 4042, 4048, 4054, 4060, 4066, 4072, 4077, 4083, 4089, 4095, 4101, 4107, 4113, 4119, 4125, 4131, 4137, 4142, 4148, 4154, 4160, 4166, 4172, 4178, 4184, 4190, 4196, 4202, 4208, 4215, 4221, 4227, 4233, 4239, 4245, 4251, 4257, 4263, 4269, 4275, 4282, 4288, 4294, 4300, 4306, 4312, 4319, 4325, 4331, 4337, 4344, 4350, 4356, 4362, 4368, 4375, 4381, 4387, 4394, 4400, 4406, 4413, 4419, 4425, 4432, 4438, 4444, 4451, 4457, 4463, 4470, 4476, 4483, 4489, 4495, 4502, 4508, 4515, 4521, 4528, 4534, 4541, 4547, 4554, 4560, 4567, 4573, 4580, 4586, 4593, 4600, 4606, 4613, 4619, 4626, 4633, 4639, 4646, 4652, 4659, 4666, 4672, 4679, 4686, 4692, 4699, 4706, 4713, 4719, 4726, 4733, 4740, 4746, 4753, 4760, 4767, 4774, 4780, 4787, 4794, 4801, 4808, 4815, 4821, 4828, 4835, 4842, 4849, 4856, 4863, 4870, 4877, 4884, 4891, 4898, 4905, 4912, 4919, 4926, 4933, 4940, 4947, 4954, 4961, 4968, 4975, 4982, 4989, 4996, 5003, 5011, 5018, 5025, 5032, 5039, 5046, 5053, 5061, 5068, 5075, 5082, 5090, 5097, 5104, 5111, 5119, 5126, 5133, 5140, 5148, 5155, 5162, 5170, 5177, 5185, 5192, 5199, 5207, 5214, 5221, 5229, 5236, 5244, 5251, 5259, 5266, 5274, 5281, 5289, 5296, 5304, 5311, 5319, 5326, 5334, 5341, 5349, 5357, 5364, 5372, 5379, 5387, 5395, 5402, 5410, 5418, 5425, 5433, 5441, 5449, 5456, 5464, 5472, 5480, 5487, 5495, 5503, 5511, 5519, 5526, 5534, 5542, 5550, 5558, 5566, 5574, 5581, 5589, 5597, 5605, 5613, 5621, 5629, 5637, 5645, 5653, 5661, 5669, 5677, 5685, 5693, 5701, 5709, 5717, 5725, 5734, 5742, 5750, 5758, 5766, 5774, 5782, 5791, 5799, 5807, 5815, 5823, 5832, 5840, 5848, 5856, 5865, 5873, 5881, 5890, 5898, 5906, 5915, 5923, 5931, 5940, 5948, 5957, 5965, 5973, 5982, 5990, 5999, 6007, 6016, 6024, 6033, 6041, 6050, 6058, 6067, 6075, 6084, 6093, 6101, 6110, 6119, 6127, 6136, 6144, 6153, 6162, 6171, 6179, 6188, 6197, 6205, 6214, 6223, 6232, 6241, 6249, 6258, 6267, 6276, 6285, 6294, 6302, 6311, 6320, 6329, 6338, 6347, 6356, 6365, 6374, 6383, 6392, 6401, 6410, 6419, 6428, 6437, 6446, 6455, 6464, 6473, 6482, 6492, 6501, 6510, 6519, 6528, 6537, 6547, 6556, 6565, 6574, 6584, 6593, 6602, 6611, 6621, 6630, 6639, 6649, 6658, 6667, 6677, 6686, 6696, 6705, 6714, 6724, 6733, 6743, 6752, 6762, 6771, 6781, 6790, 6800, 6809, 6819, 6829, 6838, 6848, 6857, 6867, 6877, 6886, 6896, 6906, 6915, 6925, 6935, 6945, 6954, 6964, 6974, 6984, 6994, 7003, 7013, 7023, 7033, 7043, 7053, 7063, 7073, 7082, 7092, 7102, 7112, 7122, 7132, 7142, 7152, 7162, 7172, 7183, 7193, 7203, 7213, 7223, 7233, 7243, 7253, 7264, 7274, 7284, 7294, 7304, 7315, 7325, 7335, 7345, 7356, 7366, 7376, 7387, 7397, 7407, 7418, 7428, 7439, 7449, 7460, 7470, 7480, 7491, 7501, 7512, 7522, 7533, 7544, 7554, 7565, 7575, 7586, 7597, 7607, 7618, 7628, 7639, 7650, 7661, 7671, 7682, 7693, 7704, 7714, 7725, 7736, 7747, 7758, 7769, 7779, 7790, 7801, 7812, 7823, 7834, 7845, 7856, 7867, 7878, 7889, 7900, 7911, 7922, 7933, 7944, 7955, 7967, 7978, 7989, 8000, 8011, 8022, 8034, 8045, 8056, 8067, 8079, 8090, 8101, 8113, 8124, 8135, 8147, 8158, 8169, 8181, 8192, 8204, 8215, 8227, 8238, 8250, 8261, 8273, 8284, 8296, 8307, 8319, 8331, 8342, 8354, 8366, 8377, 8389, 8401, 8412, 8424, 8436, 8448, 8459, 8471, 8483, 8495, 8507, 8519, 8531, 8542, 8554, 8566, 8578, 8590, 8602, 8614, 8626, 8638, 8650, 8662, 8674, 8687, 8699, 8711, 8723, 8735, 8747, 8760, 8772, 8784, 8796, 8808, 8821, 8833, 8845, 8858, 8870, 8882, 8895, 8907, 8920, 8932, 8945, 8957, 8969, 8982, 8994, 9007, 9020, 9032, 9045, 9057, 9070, 9083, 9095, 9108, 9121, 9133, 9146, 9159, 9172, 9184, 9197, 9210, 9223, 9236, 9248, 9261, 9274, 9287, 9300, 9313, 9326, 9339, 9352, 9365, 9378, 9391, 9404, 9417, 9430, 9443, 9457, 9470, 9483, 9496, 9509, 9523, 9536, 9549, 9562, 9576, 9589, 9602, 9616, 9629, 9642, 9656, 9669, 9683, 9696, 9710, 9723, 9737, 9750, 9764, 9777, 9791, 9805, 9818, 9832, 9846, 9859, 9873, 9887, 9900, 9914, 9928, 9942, 9956, 9969, 9983, 9997, 10011, 10025, 10039, 10053, 10067, 10081, 10095, 10109, 10123, 10137, 10151, 10165, 10179, 10193, 10207, 10222, 10236, 10250, 10264, 10279, 10293, 10307, 10321, 10336, 10350, 10364, 10379, 10393, 10408, 10422, 10437, 10451, 10466, 10480, 10495, 10509, 10524, 10538, 10553, 10568, 10582, 10597, 10612, 10627, 10641, 10656, 10671, 10686, 10700, 10715, 10730, 10745, 10760, 10775, 10790, 10805, 10820, 10835, 10850, 10865, 10880, 10895, 10910, 10925, 10940, 10956, 10971, 10986, 11001, 11016, 11032, 11047, 11062, 11078, 11093, 11108, 11124, 11139, 11155, 11170, 11186, 11201, 11217, 11232, 11248, 11263, 11279, 11295, 11310, 11326, 11342, 11357, 11373, 11389, 11405, 11420, 11436, 11452, 11468, 11484, 11500, 11516, 11532, 11547, 11563, 11579, 11596, 11612, 11628, 11644, 11660, 11676, 11692, 11708, 11725, 11741, 11757, 11773, 11790, 11806, 11822, 11839, 11855, 11871, 11888, 11904, 11921, 11937, 11954, 11970, 11987, 12004, 12020, 12037, 12053, 12070, 12087, 12104, 12120, 12137, 12154, 12171, 12188, 12204, 12221, 12238, 12255, 12272, 12289, 12306, 12323, 12340, 12357, 12374, 12391, 12408, 12426, 12443, 12460, 12477, 12495, 12512, 12529, 12546, 12564, 12581, 12599, 12616, 12633, 12651, 12668, 12686, 12703, 12721, 12739, 12756, 12774, 12791, 12809, 12827, 12845, 12862, 12880, 12898, 12916, 12933, 12951, 12969, 12987, 13005, 13023, 13041, 13059, 13077, 13095, 13113, 13131, 13150, 13168, 13186, 13204, 13222, 13241, 13259, 13277, 13296, 13314, 13332, 13351, 13369, 13388, 13406, 13425, 13443, 13462, 13480, 13499, 13518, 13536, 13555, 13574, 13592, 13611, 13630, 13649, 13668, 13686, 13705, 13724, 13743, 13762, 13781, 13800, 13819, 13838, 13857, 13876, 13896, 13915, 13934, 13953, 13972, 13992, 14011, 14030, 14050, 14069, 14088, 14108, 14127, 14147, 14166, 14186, 14205, 14225, 14245, 14264, 14284, 14304, 14323, 14343, 14363, 14383, 14403, 14422, 14442, 14462, 14482, 14502, 14522, 14542, 14562, 14582, 14602, 14623, 14643, 14663, 14683, 14703, 14724, 14744, 14764, 14785, 14805, 14825, 14846, 14866, 14887, 14907, 14928, 14948, 14969, 14990, 15010, 15031, 15052, 15072, 15093, 15114, 15135, 15156, 15177, 15197, 15218, 15239, 15260, 15281, 15302, 15323, 15345, 15366, 15387, 15408, 15429, 15451, 15472, 15493, 15514, 15536, 15557, 15579, 15600, 15622, 15643, 15665, 15686, 15708, 15729, 15751, 15773, 15795, 15816, 15838, 15860, 15882, 15904, 15925, 15947, 15969, 15991, 16013, 16035, 16057, 16080, 16102, 16124, 16146, 16168, 16191, 16213, 16235, 16257, 16280, 16302, 16325, 16347, 16370, 16392, 16415, 16437, 16460, 16483, 16505, 16528, 16551, 16573, 16596, 16619, 16642, 16665, 16688, 16711, 16734, 16757, 16780, 16803, 16826, 16849, 16872, 16895, 16919, 16942, 16965, 16989, 17012, 17035, 17059, 17082, 17106, 17129, 17153, 17176, 17200, 17224, 17247, 17271, 17295, 17319, 17342, 17366, 17390, 17414, 17438, 17462, 17486, 17510, 17534, 17558, 17582, 17606, 17631, 17655, 17679, 17703, 17728, 17752, 17777, 17801, 17825, 17850, 17874, 17899, 17924, 17948, 17973, 17998, 18022, 18047, 18072, 18097, 18122, 18147, 18171, 18196, 18221, 18246, 18272, 18297, 18322, 18347, 18372, 18397, 18423, 18448, 18473, 18499, 18524, 18550, 18575, 18601, 18626, 18652, 18677, 18703, 18729, 18754, 18780, 18806, 18832, 18858, 18883, 18909, 18935, 18961, 18987, 19013, 19040, 19066, 19092, 19118, 19144, 19171, 19197, 19223, 19250, 19276, 19303, 19329, 19356, 19382, 19409, 19435, 19462, 19489, 19516, 19542, 19569, 19596, 19623, 19650, 19677, 19704, 19731, 19758, 19785, 19812, 19839, 19867, 19894, 19921, 19949, 19976, 20003, 20031, 20058, 20086, 20113, 20141, 20169, 20196, 20224, 20252, 20279, 20307, 20335, 20363, 20391, 20419, 20447, 20475, 20503, 20531, 20559, 20588, 20616, 20644, 20672, 20701, 20729, 20758, 20786, 20815, 20843, 20872, 20900, 20929, 20958, 20986, 21015, 21044, 21073, 21102, 21131, 21160, 21189, 21218, 21247, 21276, 21305, 21334, 21364, 21393, 21422, 21452, 21481, 21511, 21540, 21570, 21599, 21629, 21658, 21688, 21718, 21748, 21777, 21807, 21837, 21867, 21897, 21927, 21957, 21987, 22017, 22047, 22078, 22108, 22138, 22169, 22199, 22229, 22260, 22290, 22321, 22351, 22382, 22413, 22444, 22474, 22505, 22536, 22567, 22598, 22629, 22660, 22691, 22722, 22753, 22784, 22815, 22847, 22878, 22909, 22941, 22972, 23003, 23035, 23067, 23098, 23130, 23161, 23193, 23225, 23257, 23289, 23321, 23352, 23384, 23416, 23449, 23481, 23513, 23545, 23577, 23610, 23642, 23674, 23707, 23739, 23772, 23804, 23837, 23869, 23902, 23935, 23968, 24000, 24033, 24066, 24099, 24132, 24165, 24198, 24231, 24265, 24298, 24331, 24364, 24398, 24431, 24465, 24498, 24532, 24565, 24599, 24633, 24666, 24700, 24734, 24768, 24802, 24836, 24870, 24904, 24938, 24972, 25006, 25040, 25074, 25109, 25143, 25178, 25212, 25247, 25281, 25316, 25350, 25385, 25420, 25455, 25489, 25524, 25559, 25594, 25629, 25664, 25699, 25735, 25770, 25805, 25840, 25876, 25911, 25947, 25982, 26018, 26053, 26089, 26124, 26160, 26196, 26232, 26268, 26304, 26340, 26376, 26412, 26448, 26484, 26520, 26557, 26593, 26629, 26666, 26702, 26739, 26775, 26812, 26849, 26885, 26922, 26959, 26996, 27033, 27070, 27107, 27144, 27181, 27218, 27255, 27293, 27330, 27367, 27405, 27442, 27480, 27517, 27555, 27593, 27630, 27668, 27706, 27744, 27782, 27820, 27858, 27896, 27934, 27972, 28010, 28049, 28087, 28125, 28164, 28202, 28241, 28280, 28318, 28357, 28396, 28434, 28473, 28512, 28551, 28590, 28629, 28668, 28708, 28747, 28786, 28826, 28865, 28904, 28944, 28983, 29023, 29063, 29102, 29142, 29182, 29222, 29262, 29302, 29342, 29382, 29422, 29462, 29503, 29543, 29583, 29624, 29664, 29705, 29745, 29786, 29827, 29867, 29908, 29949, 29990, 30031, 30072, 30113, 30154, 30195, 30237, 30278, 30319, 30361, 30402, 30444, 30485, 30527, 30569, 30611, 30652, 30694, 30736, 30778, 30820, 30862, 30904, 30947, 30989, 31031, 31074, 31116, 31159, 31201, 31244, 31286, 31329, 31372, 31415, 31458, 31501, 31544, 31587, 31630, 31673, 31716, 31760, 31803, 31847, 31890, 31934, 31977, 32021, 32065, 32108, 32152, 32196, 32240, 32284, 32328, 32372, 32417, 32461, 32505, 32550, 32594, 32639, 32683, 32728, 32772, 32817, 32862, 32907, 32952, 32997, 33042, 33087, 33132, 33177, 33223, 33268, 33313, 33359, 33404, 33450, 33496, 33541, 33587, 33633, 33679, 33725, 33771, 33817, 33863, 33909, 33956, 34002, 34048, 34095, 34141, 34188, 34235, 34281, 34328, 34375, 34422, 34469, 34516, 34563, 34610, 34658, 34705, 34752, 34800, 34847, 34895, 34942, 34990, 35038, 35086, 35133, 35181, 35229, 35277, 35326, 35374, 35422, 35470, 35519, 35567, 35616, 35664, 35713, 35762, 35811, 35859, 35908, 35957, 36006, 36056, 36105, 36154, 36203, 36253, 36302, 36352, 36401, 36451, 36501, 36551, 36600, 36650, 36700, 36750, 36801, 36851, 36901, 36951, 37002, 37052, 37103, 37153, 37204, 37255, 37306, 37357, 37408, 37459, 37510, 37561, 37612, 37663, 37715, 37766, 37818, 37869, 37921, 37973, 38024, 38076, 38128, 38180, 38232, 38284, 38337, 38389, 38441, 38494, 38546, 38599, 38651, 38704, 38757, 38810, 38863, 38916, 38969, 39022, 39075, 39128, 39182, 39235, 39289, 39342, 39396, 39450, 39503, 39557, 39611, 39665, 39719, 39773, 39828, 39882, 39936, 39991, 40045, 40100, 40155, 40209, 40264, 40319, 40374, 40429, 40484, 40539, 40595, 40650, 40705, 40761, 40816, 40872, 40928, 40984, 41040, 41095, 41151, 41208, 41264, 41320, 41376, 41433, 41489, 41546, 41602, 41659, 41716, 41773, 41830, 41887, 41944, 42001, 42058, 42116, 42173, 42230, 42288, 42346, 42403, 42461, 42519, 42577, 42635, 42693, 42751, 42810, 42868, 42926, 42985, 43043, 43102, 43161, 43220, 43279, 43337, 43397, 43456, 43515, 43574, 43634, 43693, 43753, 43812, 43872, 43932, 43992, 44051, 44112, 44172, 44232, 44292, 44352, 44413, 44473, 44534, 44595, 44655, 44716, 44777, 44838, 44899, 44960, 45022, 45083, 45145, 45206, 45268, 45329, 45391, 45453, 45515, 45577, 45639, 45701, 45763, 45826, 45888, 45951, 46013, 46076, 46139, 46202, 46264, 46327, 46391, 46454, 46517, 46580, 46644, 46707, 46771, 46835, 46899, 46962, 47026, 47090, 47155, 47219, 47283, 47348, 47412, 47477, 47541, 47606, 47671, 47736, 47801, 47866, 47931, 47996, 48062, 48127, 48193, 48258, 48324, 48390, 48456, 48522, 48588, 48654, 48720, 48787, 48853, 48920, 48986, 49053, 49120, 49187, 49254, 49321, 49388, 49455, 49523, 49590, 49658, 49725, 49793, 49861, 49929, 49997, 50065, 50133, 50201, 50269, 50338, 50406, 50475, 50544, 50613, 50682, 50751, 50820, 50889, 50958, 51028, 51097, 51167, 51236, 51306, 51376, 51446, 51516, 51586, 51656, 51727, 51797, 51867, 51938, 52009, 52080, 52151, 52222, 52293, 52364, 52435, 52506, 52578, 52650, 52721, 52793, 52865, 52937, 53009, 53081, 53153, 53226, 53298, 53371, 53443, 53516, 53589, 53662, 53735, 53808, 53881, 53955, 54028, 54102, 54175, 54249, 54323, 54397, 54471, 54545, 54619, 54694, 54768, 54843, 54917, 54992, 55067, 55142, 55217, 55292, 55367, 55443, 55518, 55594, 55669, 55745, 55821, 55897, 55973, 56049, 56125, 56202, 56278, 56355, 56431, 56508, 56585, 56662, 56739, 56817, 56894, 56971, 57049, 57126, 57204, 57282, 57360, 57438, 57516, 57594, 57673, 57751, 57830, 57909, 57987, 58066, 58145, 58224, 58304, 58383, 58462, 58542, 58622, 58701, 58781, 58861, 58941, 59022, 59102, 59182, 59263, 59343, 59424, 59505, 59586, 59667, 59748, 59829, 59911, 59992, 60074, 60156, 60238, 60320, 60402, 60484, 60566, 60648, 60731, 60814, 60896, 60979, 61062, 61145, 61228, 61312, 61395, 61479, 61562, 61646, 61730, 61814, 61898, 61982, 62066, 62151, 62235, 62320, 62405, 62490, 62575, 62660, 62745, 62830, 62916, 63002, 63087, 63173, 63259, 63345, 63431, 63517, 63604, 63690, 63777, 63864, 63951, 64038, 64125, 64212, 64299, 64387, 64474, 64562, 64650, 64738, 64826, 64914, 65002, 65091, 65179, 65268, 65357, 65445, 65535};
	static constexpr int32_t logSlope[4097] = {0, 713, 1386, 2023, 2627, 3202, 3751, 4274, 4776, 5257, 5720, 6165, 6593, 7007, 7407, 7794, 8168, 8531, 8883, 9225, 9558, 9881, 10196, 10502, 10801, 11092, 11377, 11654, 11926, 12191, 12450, 12704, 12952, 13196, 13434, 13668, 13897, 14122, 14343, 14559, 14772, 14981, 15186, 15388, 15587, 15782, 15974, 16163, 16349, 16532, 16712, 16889, 17064, 17237, 17407, 17574, 17739, 17902, 18063, 18221, 18378, 18532, 18684, 18835, 18983, 19130, 19275, 19418, 19560, 19699, 19838, 19974, 20109, 20242, 20374, 20505, 20634, 20762, 20888, 21013, 21137, 21259, 21380, 21500, 21619, 21736, 21853, 21968, 22082, 22195, 22307, 22418, 22528, 22637, 22745, 22851, 22957, 23062, 23166, 23270, 23372, 23473, 23574, 23673, 23772, 23870, 23968, 24064, 24160, 24255, 24349, 24442, 24535, 24627, 24718, 24808, 24898, 24987, 25076, 25164, 25251, 25337, 25423, 25509, 25593, 25677, 25761, 25844, 25926, 26008, 26089, 26170, 26250, 26329, 26408, 26487, 26565, 26642, 26719, 26796, 26872, 26947, 27022, 27097, 27171, 27244, 27317, 27390, 27462, 27534, 27606, 27677, 27747, 27817, 27887, 27956, 28025, 28094, 28162, 28229, 28297, 28364, 28430, 28496, 28562, 28628, 28693, 28757, 28822, 28886, 28950, 29013, 29076, 29139, 29201, 29263, 29325, 29386, 29447, 29508, 29568, 29628, 29688, 29748, 29807, 29866, 29925, 29983, 30041, 30099, 30156, 30213, 30270, 30327, 30383, 30440, 30495, 30551, 30606, 30661, 30716, 30771, 30825, 30879, 30933, 30987, 31040, 31093, 31146, 31199, 31251, 31303, 31355, 31407, 31458, 31510, 31561, 31611, 31662, 31712, 31763, 31812, 31862, 31912, 31961, 32010, 32059, 32108, 32156, 32205, 32253, 32301, 32349, 32396, 32443, 32491, 32538, 32584, 32631, 32677, 32724, 32770, 32816, 32861, 32907, 32952, 32997, 33042, 33087, 33132, 33176, 33221, 33265, 33309, 33353, 33396, 33440, 33483, 33527, 33570, 33612, 33655, 33698, 33740, 33782, 33825, 33867, 33908, 33950, 33992, 34033, 34074, 34115, 34156, 34197, 34238, 34278, 34319, 34359, 34399, 34439, 34479, 34519, 34558, 34598, 34637, 34676, 34715, 34754, 34793, 34832, 34870, 34909, 34947, 34985, 35023, 35061, 35099, 35137, 35174, 35212, 35249, 35286, 35323, 35360, 35397, 35434, 35471, 35507, 35543, 35580, 35616, 35652, 35688, 35724, 35760, 35795, 35831, 35866, 35902, 35937, 35972, 36007, 36042, 36077, 36111, 36146, 36180, 36215, 36249, 36283, 36317, 36351, 36385, 36419, 36453, 36486, 36520, 36553, 36587, 36620, 36653, 36686, 36719, 36752, 36785, 36817, 36850, 36883, 36915, 36947, 36980, 37012, 37044, 37076, 37108, 37139, 37171, 37203, 37234, 37266, 37297, 37329, 37360, 37391, 37422, 37453, 37484, 37515, 37545, 37576, 37607, 37637, 37667, 37698, 37728, 37758, 37788, 37818, 37848, 37878, 37908, 37938, 37967, 37997, 38026, 38056, 38085, 38115, 38144, 38173, 38202, 38231, 38260, 38289, 38318, 38346, 38375, 38403, 38432, 38460, 38489, 38517, 38545, 38574, 38602, 38630, 38658, 38686, 38713, 38741, 38769, 38796, 38824, 38852, 38879, 38906, 38934, 38961, 38988, 39015, 39042, 39069, 39096, 39123, 39150, 39177, 39204, 39230, 39257, 39283, 39310, 39336, 39362, 39389, 39415, 39441, 39467, 39493, 39519, 39545, 39571, 39597, 39623, 39649, 39674, 39700, 39725, 39751, 39776, 39802, 39827, 39852, 39877, 39903, 39928, 39953, 39978, 40003, 40028, 40053, 40077, 40102, 40127, 40151, 40176, 40201, 40225, 40249, 40274, 40298, 40323, 40347, 40371, 40395, 40419, 40443, 40467, 40491, 40515, 40539, 40563, 40586, 40610, 40634, 40657, 40681, 40705, 40728, 40751, 40775, 40798, 40821, 40845, 40868, 40891, 40914, 40937, 40960, 40983, 41006, 41029, 41052, 41075, 41097, 41120, 41143, 41165, 41188, 41210, 41233, 41255, 41278, 41300, 41322, 41345, 41367, 41389, 41411, 41433, 41455, 41477, 41499, 41521, 41543, 41565, 41587, 41609, 41630, 41652, 41674, 41695, 41717, 41739, 41760, 41782, 41803, 41824, 41846, 41867, 41888, 41910, 41931, 41952, 41973, 41994, 42015, 42036, 42057, 42078, 42099, 42120, 42141, 42161, 42182, 42203, 42224, 42244, 42265, 42285, 42306, 42326, 42347, 42367, 42388, 42408, 42428, 42449, 42469, 42489, 42509, 42529, 42550, 42570, 42590, 42610, 42630, 42650, 42670, 42689, 42709, 42729, 42749, 42769, 42788, 42808, 42828, 42847, 42867, 42886, 42906, 42925, 42945, 42964, 42984, 43003, 43022, 43042, 43061, 43080, 43099, 43118, 43138, 43157, 43176, 43195, 43214, 43233, 43252, 43271, 43290, 43308, 43327, 43346, 43365, 43384, 43402, 43421, 43440, 43458, 43477, 43495, 43514, 43532, 43551, 43569, 43588, 43606, 43625, 43643, 43661, 43680, 43698, 43716, 43734, 43752, 43770, 43789, 43807, 43825, 43843, 43861, 43879, 43897, 43915, 43932, 43950, 43968, 43986, 44004, 44022, 44039, 44057, 44075, 44092, 44110, 44128, 44145, 44163, 44180, 44198, 44215, 44233, 44250, 44267, 44285, 44302, 44319, 44337, 44354, 44371, 44388, 44406, 44423, 44440, 44457, 44474, 44491, 44508, 44525, 44542, 44559, 44576, 44593, 44610, 44627, 44644, 44660, 44677, 44694, 44711, 44728, 44744, 44761, 44778, 44794, 44811, 44827, 44844, 44860, 44877, 44894, 44910, 44926, 44943, 44959, 44976, 44992, 45008, 45025, 45041, 45057, 45073, 45090, 45106, 45122, 45138, 45154, 45170, 45187, 45203, 45219, 45235, 45251, 45267, 45283, 45299, 45314, 45330, 45346, 45362, 45378, 45394, 45409, 45425, 45441, 45457, 45472, 45488, 45504, 45519, 45535, 45551, 45566, 45582, 45597, 45613, 45628, 45644, 45659, 45675, 45690, 45706, 45721, 45736, 45752, 45767, 45782, 45797, 45813, 45828, 45843, 45858, 45874, 45889, 45904, 45919, 45934, 45949, 45964, 45979, 45994, 46009, 46024, 46039, 46054, 46069, 46084, 46099, 46114, 46129, 46144, 46158, 46173, 46188, 46203, 46217, 46232, 46247, 46262, 46276, 46291, 46306, 46320, 46335, 46349, 46364, 46378, 46393, 46407, 46422, 46436, 46451, 46465, 46480, 46494, 46509, 46523, 46537, 46552, 46566, 46580, 46594, 46609, 46623, 46637, 46651, 46666, 46680, 46694, 46708, 46722, 46736, 46750, 46765, 46779, 46793, 46807, 46821, 46835, 46849, 46863, 46877, 46890, 46904, 46918, 46932, 46946, 46960, 46974, 46987, 47001, 47015, 47029, 47043, 47056, 47070, 47084, 47097, 47111, 47125, 47138, 47152, 47166, 47179, 47193, 47206, 47220, 47233, 47247, 47260, 47274, 47287, 47301, 47314, 47328, 47341, 47354, 47368, 47381, 47395, 47408, 47421, 47435, 47448, 47461, 47474, 47488, 47501, 47514, 47527, 47540, 47554, 47567, 47580, 47593, 47606, 47619, 47632, 47645, 47658, 47671, 47684, 47697, 47710, 47723, 47736, 47749, 47762, 47775, 47788, 47801, 47814, 47827, 47840, 47852, 47865, 47878, 47891, 47904, 47916, 47929, 47942, 47955, 47967, 47980, 47993, 48005, 48018, 48031, 48043, 48056, 48069, 48081, 48094, 48106, 48119, 48131, 48144, 48156, 48169, 48181, 48194, 48206, 48219, 48231, 48244, 48256, 48268, 48281, 48293, 48306, 48318, 48330, 48343, 48355, 48367, 48379, 48392, 48404, 48416, 48428, 48441, 48453, 48465, 48477, 48489, 48501, 48514, 48526, 48538, 48550, 48562, 48574, 48586, 48598, 48610, 48622, 48634, 48646, 48658, 48670, 48682, 48694, 48706, 48718, 48730, 48742, 48754, 48766, 48778, 48789, 48801, 48813, 48825, 48837, 48849, 48860, 48872, 48884, 48896, 48907, 48919, 48931, 48943, 48954, 48966, 48978, 48989, 49001, 49013, 49024, 49036, 49047, 49059, 49071, 49082, 49094, 49105, 49117, 49128, 49140, 49151, 49163, 49174, 49186, 49197, 49209, 49220, 49231, 49243, 49254, 49266, 49277, 49288, 49300, 49311, 49322, 49334, 49345, 49356, 49368, 49379, 49390, 49402, 49413, 49424, 49435, 49446, 49458, 49469, 49480, 49491, 49502, 49514, 49525, 49536, 49547, 49558, 49569, 49580, 49591, 49602, 49613, 49625, 49636, 49647, 49658, 49669, 49680, 49691, 49702, 49713, 49723, 49734, 49745, 49756, 49767, 49778, 49789, 49800, 49811, 49822, 49833, 49843, 49854, 49865, 49876, 49887, 49897, 49908, 49919, 49930, 49941, 49951, 49962, 49973, 49983, 49994, 50005, 50016, 50026, 50037, 50048, 50058, 50069, 50080, 50090, 50101, 50111, 50122, 50133, 50143, 50154, 50164, 50175, 50185, 50196, 50206, 50217, 50227, 50238, 50248, 50259, 50269, 50280, 50290, 50301, 50311, 50321, 50332, 50342, 50353, 50363, 50373, 50384, 50394, 50404, 50415, 50425, 50435, 50446, 50456, 50466, 50477, 50487, 50497, 50507, 50518, 50528, 50538, 50548, 50559, 50569, 50579, 50589, 50599, 50609, 50620, 50630, 50640, 50650, 50660, 50670, 50680, 50690, 50701, 50711, 50721, 50731, 50741, 50751, 50761, 50771, 50781, 50791, 50801, 50811, 50821, 50831, 50841, 50851, 50861, 50871, 50881, 50891, 50901, 50910, 50920, 50930, 50940, 50950, 50960, 50970, 50980, 50989, 50999, 51009, 51019, 51029, 51039, 51048, 51058, 51068, 51078, 51087, 51097, 51107, 51117, 51126, 51136, 51146, 51156, 51165, 51175, 51185, 51194, 51204, 51214, 51223, 51233, 51243, 51252, 51262, 51271, 51281, 51291, 51300, 51310, 51319, 51329, 51338, 51348, 51358, 51367, 51377, 51386, 51396, 51405, 51415, 51424, 51434, 51443, 51453, 51462, 51471, 51481, 51490, 51500, 51509, 51519, 51528, 51537, 51547, 51556, 51566, 51575, 51584, 51594, 51603, 51612, 51622, 51631, 51640, 51650, 51659, 51668, 51677, 51687, 51696, 51705, 51715, 51724, 51733, 51742, 51751, 51761, 51770, 51779, 51788, 51798, 51807, 51816, 51825, 51834, 51843, 51853, 51862, 51871, 51880, 51889, 51898, 51907, 51916, 51925, 51935, 51944, 51953, 51962, 51971, 51980, 51989, 51998, 52007, 52016, 52025, 52034, 52043, 52052, 52061, 52070, 52079, 52088, 52097, 52106, 52115, 52124, 52133, 52142, 52151, 52160, 52168, 52177, 52186, 52195, 52204, 52213, 52222, 52231, 52239, 52248, 52257, 52266, 52275, 52284, 52292, 52301, 52310, 52319, 52328, 52336, 52345, 52354, 52363, 52372, 52380, 52389, 52398, 52406, 52415, 52424, 52433, 52441, 52450, 52459, 52467, 52476, 52485, 52493, 52502, 52511, 52519, 52528, 52537, 52545, 52554, 52563, 52571, 52580, 52588, 52597, 52606, 52614, 52623, 52631, 52640, 52648, 52657, 52665, 52674, 52683, 52691, 52700, 52708, 52717, 52725, 52734, 52742, 52751, 52759, 52767, 52776, 52784, 52793, 52801, 52810, 52818, 52827, 52835, 52843, 52852, 52860, 52869, 52877, 52885, 52894, 52902, 52911, 52919, 52927, 52936, 52944, 52952, 52961, 52969, 52977, 52986, 52994, 53002, 53010, 53019, 53027, 53035, 53044, 53052, 53060, 53068, 53077, 53085, 53093, 53101, 53110, 53118, 53126, 53134, 53142, 53151, 53159, 53167, 53175, 53183, 53192, 53200, 53208, 53216, 53224, 53232, 53240, 53249, 53257, 53265, 53273, 53281, 53289, 53297, 53305, 53313, 53321, 53330, 53338, 53346, 53354, 53362, 53370, 53378, 53386, 53394, 53402, 53410, 53418, 53426, 53434, 53442, 53450, 53458, 53466, 53474, 53482, 53490, 53498, 53506, 53514, 53522, 53530, 53538, 53546, 53553, 53561, 53569, 53577, 53585, 53593, 53601, 53609, 53617, 53625, 53632, 53640, 53648, 53656, 53664, 53672, 53679, 53687, 53695, 53703, 53711, 53719, 53726, 53734, 53742, 53750, 53758, 53765, 53773, 53781, 53789, 53796, 53804, 53812, 53820, 53827, 53835, 53843, 53851, 53858, 53866, 53874, 53882, 53889, 53897, 53905, 53912, 53920, 53928, 53935, 53943, 53951, 53958, 53966, 53974, 53981, 53989, 53997, 54004, 54012, 54019, 54027, 54035, 54042, 54050, 54057, 54065, 54073, 54080, 54088, 54095, 54103, 54110, 54118, 54126, 54133, 54141, 54148, 54156, 54163, 54171, 54178, 54186, 54193, 54201, 54208, 54216, 54223, 54231, 54238, 54246, 54253, 54261, 54268, 54275, 54283, 54290, 54298, 54305, 54313, 54320, 54328, 54335, 54342, 54350, 54357, 54365, 54372, 54379, 54387, 54394, 54401, 54409, 54416, 54424, 54431, 54438, 54446, 54453, 54460, 54468, 54475, 54482, 54490, 54497, 54504, 54512, 54519, 54526, 54533, 54541, 54548, 54555, 54563, 54570, 54577, 54584, 54592, 54599, 54606, 54613, 54621, 54628, 54635, 54642, 54650, 54657, 54664, 54671, 54678, 54686, 54693, 54700, 54707, 54714, 54721, 54729, 54736, 54743, 54750, 54757, 54764, 54772, 54779, 54786, 54793, 54800, 54807, 54814, 54822, 54829, 54836, 54843, 54850, 54857, 54864, 54871, 54878, 54885, 54892, 54900, 54907, 54914, 54921, 54928, 54935, 54942, 54949, 54956, 54963, 54970, 54977, 54984, 54991, 54998, 55005, 55012, 55019, 55026, 55033, 55040, 55047, 55054, 55061, 55068, 55075, 55082, 55089, 55096, 55103, 55110, 55117, 55124, 55131, 55137, 55144, 55151, 55158, 55165, 55172, 55179, 55186, 55193, 55200, 55207, 55213, 55220, 55227, 55234, 55241, 55248, 55255, 55261, 55268, 55275, 55282, 55289, 55296, 55303, 55309, 55316, 55323, 55330, 55337, 55343, 55350, 55357, 55364, 55371, 55377, 55384, 55391, 55398, 55405, 55411, 55418, 55425, 55432, 55438, 55445, 55452, 55459, 55465, 55472, 55479, 55486, 55492, 55499, 55506, 55512, 55519, 55526, 55533, 55539, 55546, 55553, 55559, 55566, 55573, 55579, 55586, 55593, 55599, 55606, 55613, 55619, 55626, 55633, 55639, 55646, 55653, 55659, 55666, 55672, 55679, 55686, 55692, 55699, 55705, 55712, 55719, 55725, 55732, 55738, 55745, 55752, 55758, 55765, 55771, 55778, 55784, 55791, 55798, 55804, 55811, 55817, 55824, 55830, 55837, 55843, 55850, 55856, 55863, 55869, 55876, 55882, 55889, 55895, 55902, 55908, 55915, 55921, 55928, 55934, 55941, 55947, 55954, 55960, 55967, 55973, 55980, 55986, 55992, 55999, 56005, 56012, 56018, 56025, 56031, 56037, 56044, 56050, 56057, 56063, 56070, 56076, 56082, 56089, 56095, 56101, 56108, 56114, 56121, 56127, 56133, 56140, 56146, 56152, 56159, 56165, 56172, 56178, 56184, 56191, 56197, 56203, 56210, 56216, 56222, 56228, 56235, 56241, 56247, 56254, 56260, 56266, 56273, 56279, 56285, 56291, 56298, 56304, 56310, 56317, 56323, 56329, 56335, 56342, 56348, 56354, 56360, 56367, 56373, 56379, 56385, 56392, 56398, 56404, 56410, 56416, 56423, 56429, 56435, 56441, 56448, 56454, 56460, 56466, 56472, 56478, 56485, 56491, 56497, 56503, 56509, 56516, 56522, 56528, 56534, 56540, 56546, 56552, 56559, 56565, 56571, 56577, 56583, 56589, 56595, 56602, 56608, 56614, 56620, 56626, 56632, 56638, 56644, 56650, 56656, 56663, 56669, 56675, 56681, 56687, 56693, 56699, 56705, 56711, 56717, 56723, 56729, 56735, 56741, 56748, 56754, 56760, 56766, 56772, 56778, 56784, 56790, 56796, 56802, 56808, 56814, 56820, 56826, 56832, 56838, 56844, 56850, 56856, 56862, 56868, 56874, 56880, 56886, 56892, 56898, 56904, 56910, 56916, 56922, 56927, 56933, 56939, 56945, 56951, 56957, 56963, 56969, 56975, 56981, 56987, 56993, 56999, 57005, 57011, 57016, 57022, 57028, 57034, 57040, 57046, 57052, 57058, 57064, 57070, 57075, 57081, 57087, 57093, 57099, 57105, 57111, 57116, 57122, 57128, 57134, 57140, 57146, 57152, 57157, 57163, 57169, 57175, 57181, 57187, 57192, 57198, 57204, 57210, 57216, 57221, 57227, 57233, 57239, 57245, 57250, 57256, 57262, 57268, 57274, 57279, 57285, 57291, 57297, 57303, 57308, 57314, 57320, 57326, 57331, 57337, 57343, 57349, 57354, 57360, 57366, 57372, 57377, 57383, 57389, 57394, 57400, 57406, 57412, 57417, 57423, 57429, 57434, 57440, 57446, 57452, 57457, 57463, 57469, 57474, 57480, 57486, 57491, 57497, 57503, 57508, 57514, 57520, 57525, 57531, 57537, 57542, 57548, 57554, 57559, 57565, 57571, 57576, 57582, 57587, 57593, 57599, 57604, 57610, 57616, 57621, 57627, 57632, 57638, 57644, 57649, 57655, 57660, 57666, 57672, 57677, 57683, 57688, 57694, 57699, 57705, 57711, 57716, 57722, 57727, 57733, 57738, 57744, 57750, 57755, 57761, 57766, 57772, 57777, 57783, 57788, 57794, 57799, 57805, 57811, 57816, 57822, 57827, 57833, 57838, 57844, 57849, 57855, 57860, 57866, 57871, 57877, 57882, 57888, 57893, 57899, 57904, 57910, 57915, 57921, 57926, 57931, 57937, 57942, 57948, 57953, 57959, 57964, 57970, 57975, 57981, 57986, 57991, 57997, 58002, 58008, 58013, 58019, 58024, 58029, 58035, 58040, 58046, 58051, 58057, 58062, 58067, 58073, 58078, 58084, 58089, 58094, 58100, 58105, 58111, 58116, 58121, 58127, 58132, 58137, 58143, 58148, 58154, 58159, 58164, 58170, 58175, 58180, 58186, 58191, 58196, 58202, 58207, 58212, 58218, 58223, 58228, 58234, 58239, 58244, 58250, 58255, 58260, 58266, 58271, 58276, 58282, 58287, 58292, 58298, 58303, 58308, 58313, 58319, 58324, 58329, 58335, 58340, 58345, 58350, 58356, 58361, 58366, 58372, 58377, 58382, 58387, 58393, 58398, 58403, 58408, 58414, 58419, 58424, 58429, 58435, 58440, 58445, 58450, 58456, 58461, 58466, 58471, 58476, 58482, 58487, 58492, 58497, 58503, 58508, 58513, 58518, 58523, 58529, 58534, 58539, 58544, 58549, 58555, 58560, 58565, 58570, 58575, 58580, 58586, 58591, 58596, 58601, 58606, 58612, 58617, 58622, 58627, 58632, 58637, 58642, 58648, 58653, 58658, 58663, 58668, 58673, 58678, 58684, 58689, 58694, 58699, 58704, 58709, 58714, 58719, 58725, 58730, 58735, 58740, 58745, 58750, 58755, 58760, 58765, 58770, 58776, 58781, 58786, 58791, 58796, 58801, 58806, 58811, 58816, 58821, 58826, 58831, 58837, 58842, 58847, 58852, 58857, 58862, 58867, 58872, 58877, 58882, 58887, 58892, 58897, 58902, 58907, 58912, 58917, 58922, 58927, 58932, 58937, 58942, 58947, 58952, 58957, 58962, 58967, 58973, 58978, 58983, 58988, 58993, 58998, 59003, 59008, 59012, 59017, 59022, 59027, 59032, 59037, 59042, 59047, 59052, 59057, 59062, 59067, 59072, 59077, 59082, 59087, 59092, 59097, 59102, 59107, 59112, 59117, 59122, 59127, 59132, 59137, 59142, 59146, 59151, 59156, 59161, 59166, 59171, 59176, 59181, 59186, 59191, 59196, 59201, 59206, 59210, 59215, 59220, 59225, 59230, 59235, 59240, 59245, 59250, 59255, 59259, 59264, 59269, 59274, 59279, 59284, 59289, 59294, 59298, 59303, 59308, 59313, 59318, 59323, 59328, 59333, 59337, 59342, 59347, 59352, 59357, 59362, 59366, 59371, 59376, 59381, 59386, 59391, 59396, 59400, 59405, 59410, 59415, 59420, 59424, 59429, 59434, 59439, 59444, 59449, 59453, 59458, 59463, 59468, 59473, 59477, 59482, 59487, 59492, 59497, 59501, 59506, 59511, 59516, 59520, 59525, 59530, 59535, 59540, 59544, 59549, 59554, 59559, 59563, 59568, 59573, 59578, 59582, 59587, 59592, 59597, 59601, 59606, 59611, 59616, 59620, 59625, 59630, 59635, 59639, 59644, 59649, 59654, 59658, 59663, 59668, 59672, 59677, 59682, 59687, 59691, 59696, 59701, 59705, 59710, 59715, 59720, 59724, 59729, 59734, 59738, 59743, 59748, 59752, 59757, 59762, 59766, 59771, 59776, 59781, 59785, 59790, 59795, 59799, 59804, 59809, 59813, 59818, 59823, 59827, 59832, 59837, 59841, 59846, 59850, 59855, 59860, 59864, 59869, 59874, 59878, 59883, 59888, 59892, 59897, 59901, 59906, 59911, 59915, 59920, 59925, 59929, 59934, 59938, 59943, 59948, 59952, 59957, 59962, 59966, 59971, 59975, 59980, 59985, 59989, 59994, 59998, 60003, 60007, 60012, 60017, 60021, 60026, 60030, 60035, 60040, 60044, 60049, 60053, 60058, 60062, 60067, 60072, 60076, 60081, 60085, 60090, 60094, 60099, 60103, 60108, 60113, 60117, 60122, 60126, 60131, 60135, 60140, 60144, 60149, 60153, 60158, 60162, 60167, 60172, 60176, 60181, 60185, 60190, 60194, 60199, 60203, 60208, 60212, 60217, 60221, 60226, 60230, 60235, 60239, 60244, 60248, 60253, 60257, 60262, 60266, 60271, 60275, 60280, 60284, 60289, 60293, 60298, 60302, 60306, 60311, 60315, 60320, 60324, 60329, 60333, 60338, 60342, 60347, 60351, 60356, 60360, 60364, 60369, 60373, 60378, 60382, 60387, 60391, 60396, 60400, 60404, 60409, 60413, 60418, 60422, 60427, 60431, 60435, 60440, 60444, 60449, 60453, 60458, 60462, 60466, 60471, 60475, 60480, 60484, 60488, 60493, 60497, 60502, 60506, 60510, 60515, 60519, 60524, 60528, 60532, 60537, 60541, 60546, 60550, 60554, 60559, 60563, 60567, 60572, 60576, 60581, 60585, 60589, 60594, 60598, 60602, 60607, 60611, 60616, 60620, 60624, 60629, 60633, 60637, 60642, 60646, 60650, 60655, 60659, 60663, 60668, 60672, 60676, 60681, 60685, 60689, 60694, 60698, 60702, 60707, 60711, 60715, 60720, 60724, 60728, 60733, 60737, 60741, 60746, 60750, 60754, 60758, 60763, 60767, 60771, 60776, 60780, 60784, 60789, 60793, 60797, 60801, 60806, 60810, 60814, 60819, 60823, 60827, 60831, 60836, 60840, 60844, 60849, 60853, 60857, 60861, 60866, 60870, 60874, 60878, 60883, 60887, 60891, 60895, 60900, 60904, 60908, 60912, 60917, 60921, 60925, 60929, 60934, 60938, 60942, 60946, 60951, 60955, 60959, 60963, 60968, 60972, 60976, 60980, 60984, 60989, 60993, 60997, 61001, 61006, 61010, 61014, 61018, 61022, 61027, 61031, 61035, 61039, 61043, 61048, 61052, 61056, 61060, 61064, 61069, 61073, 61077, 61081, 61085, 61090, 61094, 61098, 61102, 61106, 61110, 61115, 61119, 61123, 61127, 61131, 61136, 61140, 61144, 61148, 61152, 61156, 61161, 61165, 61169, 61173, 61177, 61181, 61185, 61190, 61194, 61198, 61202, 61206, 61210, 61215, 61219, 61223, 61227, 61231, 61235, 61239, 61243, 61248, 61252, 61256, 61260, 61264, 61268, 61272, 61276, 61281, 61285, 61289, 61293, 61297, 61301, 61305, 61309, 61314, 61318, 61322, 61326, 61330, 61334, 61338, 61342, 61346, 61350, 61355, 61359, 61363, 61367, 61371, 61375, 61379, 61383, 61387, 61391, 61395, 61399, 61404, 61408, 61412, 61416, 61420, 61424, 61428, 61432, 61436, 61440, 61444, 61448, 61452, 61456, 61460, 61465, 61469, 61473, 61477, 61481, 61485, 61489, 61493, 61497, 61501, 61505, 61509, 61513, 61517, 61521, 61525, 61529, 61533, 61537, 61541, 61545, 61549, 61553, 61557, 61561, 61565, 61570, 61574, 61578, 61582, 61586, 61590, 61594, 61598, 61602, 61606, 61610, 61614, 61618, 61622, 61626, 61630, 61634, 61638, 61642, 61646, 61650, 61654, 61658, 61662, 61666, 61670, 61674, 61678, 61682, 61686, 61689, 61693, 61697, 61701, 61705, 61709, 61713, 61717, 61721, 61725, 61729, 61733, 61737, 61741, 61745, 61749, 61753, 61757, 61761, 61765, 61769, 61773, 61777, 61781, 61785, 61789, 61792, 61796, 61800, 61804, 61808, 61812, 61816, 61820, 61824, 61828, 61832, 61836, 61840, 61844, 61848, 61852, 61855, 61859, 61863, 61867, 61871, 61875, 61879, 61883, 61887, 61891, 61895, 61899, 61902, 61906, 61910, 61914, 61918, 61922, 61926, 61930, 61934, 61938, 61941, 61945, 61949, 61953, 61957, 61961, 61965, 61969, 61973, 61976, 61980, 61984, 61988, 61992, 61996, 62000, 62004, 62007, 62011, 62015, 62019, 62023, 62027, 62031, 62035, 62038, 62042, 62046, 62050, 62054, 62058, 62062, 62065, 62069, 62073, 62077, 62081, 62085, 62089, 62092, 62096, 62100, 62104, 62108, 62112, 62115, 62119, 62123, 62127, 62131, 62135, 62138, 62142, 62146, 62150, 62154, 62158, 62161, 62165, 62169, 62173, 62177, 62181, 62184, 62188, 62192, 62196, 62200, 62203, 62207, 62211, 62215, 62219, 62222, 62226, 62230, 62234, 62238, 62241, 62245, 62249, 62253, 62257, 62260, 62264, 62268, 62272, 62276, 62279, 62283, 62287, 62291, 62294, 62298, 62302, 62306, 62310, 62313, 62317, 62321, 62325, 62328, 62332, 62336, 62340, 62344, 62347, 62351, 62355, 62359, 62362, 62366, 62370, 62374, 62377, 62381, 62385, 62389, 62392, 62396, 62400, 62404, 62407, 62411, 62415, 62419, 62422, 62426, 62430, 62434, 62437, 62441, 62445, 62448, 62452, 62456, 62460, 62463, 62467, 62471, 62475, 62478, 62482, 62486, 62489, 62493, 62497, 62501, 62504, 62508, 62512, 62515, 62519, 62523, 62527, 62530, 62534, 62538, 62541, 62545, 62549, 62553, 62556, 62560, 62564, 62567, 62571, 62575, 62578, 62582, 62586, 62589, 62593, 62597, 62600, 62604, 62608, 62612, 62615, 62619, 62623, 62626, 62630, 62634, 62637, 62641, 62645, 62648, 62652, 62656, 62659, 62663, 62667, 62670, 62674, 62678, 62681, 62685, 62689, 62692, 62696, 62700, 62703, 62707, 62711, 62714, 62718, 62721, 62725, 62729, 62732, 62736, 62740, 62743, 62747, 62751, 62754, 62758, 62761, 62765, 62769, 62772, 62776, 62780, 62783, 62787, 62791, 62794, 62798, 62801, 62805, 62809, 62812, 62816, 62819, 62823, 62827, 62830, 62834, 62838, 62841, 62845, 62848, 62852, 62856, 62859, 62863, 62866, 62870, 62874, 62877, 62881, 62884, 62888, 62892, 62895, 62899, 62902, 62906, 62910, 62913, 62917, 62920, 62924, 62927, 62931, 62935, 62938, 62942, 62945, 62949, 62953, 62956, 62960, 62963, 62967, 62970, 62974, 62978, 62981, 62985, 62988, 62992, 62995, 62999, 63003, 63006, 63010, 63013, 63017, 63020, 63024, 63027, 63031, 63035, 63038, 63042, 63045, 63049, 63052, 63056, 63059, 63063, 63066, 63070, 63074, 63077, 63081, 63084, 63088, 63091, 63095, 63098, 63102, 63105, 63109, 63112, 63116, 63119, 63123, 63126, 63130, 63134, 63137, 63141, 63144, 63148, 63151, 63155, 63158, 63162, 63165, 63169, 63172, 63176, 63179, 63183, 63186, 63190, 63193, 63197, 63200, 63204, 63207, 63211, 63214, 63218, 63221, 63225, 63228, 63232, 63235, 63239, 63242, 63246, 63249, 63253, 63256, 63260, 63263, 63267, 63270, 63274, 63277, 63281, 63284, 63287, 63291, 63294, 63298, 63301, 63305, 63308, 63312, 63315, 63319, 63322, 63326, 63329, 63333, 63336, 63339, 63343, 63346, 63350, 63353, 63357, 63360, 63364, 63367, 63371, 63374, 63377, 63381, 63384, 63388, 63391, 63395, 63398, 63402, 63405, 63408, 63412, 63415, 63419, 63422, 63426, 63429, 63433, 63436, 63439, 63443, 63446, 63450, 63453, 63457, 63460, 63463, 63467, 63470, 63474, 63477, 63481, 63484, 63487, 63491, 63494, 63498, 63501, 63504, 63508, 63511, 63515, 63518, 63521, 63525, 63528, 63532, 63535, 63539, 63542, 63545, 63549, 63552, 63556, 63559, 63562, 63566, 63569, 63572, 63576, 63579, 63583, 63586, 63589, 63593, 63596, 63600, 63603, 63606, 63610, 63613, 63617, 63620, 63623, 63627, 63630, 63633, 63637, 63640, 63644, 63647, 63650, 63654, 63657, 63660, 63664, 63667, 63670, 63674, 63677, 63681, 63684, 63687, 63691, 63694, 63697, 63701, 63704, 63707, 63711, 63714, 63718, 63721, 63724, 63728, 63731, 63734, 63738, 63741, 63744, 63748, 63751, 63754, 63758, 63761, 63764, 63768, 63771, 63774, 63778, 63781, 63784, 63788, 63791, 63794, 63798, 63801, 63804, 63808, 63811, 63814, 63818, 63821, 63824, 63828, 63831, 63834, 63838, 63841, 63844, 63848, 63851, 63854, 63857, 63861, 63864, 63867, 63871, 63874, 63877, 63881, 63884, 63887, 63891, 63894, 63897, 63900, 63904, 63907, 63910, 63914, 63917, 63920, 63924, 63927, 63930, 63933, 63937, 63940, 63943, 63947, 63950, 63953, 63956, 63960, 63963, 63966, 63970, 63973, 63976, 63979, 63983, 63986, 63989, 63992, 63996, 63999, 64002, 64006, 64009, 64012, 64015, 64019, 64022, 64025, 64028, 64032, 64035, 64038, 64041, 64045, 64048, 64051, 64055, 64058, 64061, 64064, 64068, 64071, 64074, 64077, 64081, 64084, 64087, 64090, 64094, 64097, 64100, 64103, 64107, 64110, 64113, 64116, 64120, 64123, 64126, 64129, 64132, 64136, 64139, 64142, 64145, 64149, 64152, 64155, 64158, 64162, 64165, 64168, 64171, 64174, 64178, 64181, 64184, 64187, 64191, 64194, 64197, 64200, 64203, 64207, 64210, 64213, 64216, 64220, 64223, 64226, 64229, 64232, 64236, 64239, 64242, 64245, 64248, 64252, 64255, 64258, 64261, 64264, 64268, 64271, 64274, 64277, 64280, 64284, 64287, 64290, 64293, 64296, 64300, 64303, 64306, 64309, 64312, 64315, 64319, 64322, 64325, 64328, 64331, 64335, 64338, 64341, 64344, 64347, 64350, 64354, 64357, 64360, 64363, 64366, 64370, 64373, 64376, 64379, 64382, 64385, 64389, 64392, 64395, 64398, 64401, 64404, 64408, 64411, 64414, 64417, 64420, 64423, 64426, 64430, 64433, 64436, 64439, 64442, 64445, 64449, 64452, 64455, 64458, 64461, 64464, 64467, 64471, 64474, 64477, 64480, 64483, 64486, 64489, 64493, 64496, 64499, 64502, 64505, 64508, 64511, 64515, 64518, 64521, 64524, 64527, 64530, 64533, 64536, 64540, 64543, 64546, 64549, 64552, 64555, 64558, 64561, 64565, 64568, 64571, 64574, 64577, 64580, 64583, 64586, 64589, 64593, 64596, 64599, 64602, 64605, 64608, 64611, 64614, 64617, 64621, 64624, 64627, 64630, 64633, 64636, 64639, 64642, 64645, 64649, 64652, 64655, 64658, 64661, 64664, 64667, 64670, 64673, 64676, 64679, 64683, 64686, 64689, 64692, 64695, 64698, 64701, 64704, 64707, 64710, 64713, 64716, 64720, 64723, 64726, 64729, 64732, 64735, 64738, 64741, 64744, 64747, 64750, 64753, 64756, 64760, 64763, 64766, 64769, 64772, 64775, 64778, 64781, 64784, 64787, 64790, 64793, 64796, 64799, 64802, 64805, 64809, 64812, 64815, 64818, 64821, 64824, 64827, 64830, 64833, 64836, 64839, 64842, 64845, 64848, 64851, 64854, 64857, 64860, 64863, 64866, 64869, 64873, 64876, 64879, 64882, 64885, 64888, 64891, 64894, 64897, 64900, 64903, 64906, 64909, 64912, 64915, 64918, 64921, 64924, 64927, 64930, 64933, 64936, 64939, 64942, 64945, 64948, 64951, 64954, 64957, 64960, 64963, 64966, 64969, 64972, 64975, 64978, 64981, 64984, 64987, 64990, 64993, 64996, 64999, 65002, 65006, 65009, 65012, 65015, 65018, 65021, 65024, 65027, 65030, 65033, 65036, 65039, 65042, 65045, 65048, 65051, 65053, 65056, 65059, 65062, 65065, 65068, 65071, 65074, 65077, 65080, 65083, 65086, 65089, 65092, 65095, 65098, 65101, 65104, 65107, 65110, 65113, 65116, 65119, 65122, 65125, 65128, 65131, 65134, 65137, 65140, 65143, 65146, 65149, 65152, 65155, 65158, 65161, 65164, 65167, 65170, 65173, 65176, 65179, 65182, 65184, 65187, 65190, 65193, 65196, 65199, 65202, 65205, 65208, 65211, 65214, 65217, 65220, 65223, 65226, 65229, 65232, 65235, 65238, 65241, 65244, 65246, 65249, 65252, 65255, 65258, 65261, 65264, 65267, 65270, 65273, 65276, 65279, 65282, 65285, 65288, 65291, 65294, 65296, 65299, 65302, 65305, 65308, 65311, 65314, 65317, 65320, 65323, 65326, 65329, 65332, 65335, 65337, 65340, 65343, 65346, 65349, 65352, 65355, 65358, 65361, 65364, 65367, 65370, 65372, 65375, 65378, 65381, 65384, 65387, 65390, 65393, 65396, 65399, 65402, 65404, 65407, 65410, 65413, 65416, 65419, 65422, 65425, 65428, 65431, 65433, 65436, 65439, 65442, 65445, 65448, 65451, 65454, 65457, 65460, 65462, 65465, 65468, 65471, 65474, 65477, 65480, 65483, 65486, 65488, 65491, 65494, 65497, 65500, 65503, 65506, 65509, 65511, 65514, 65517, 65520, 65523, 65526, 65529, 65532, 65535};
	static constexpr int32_t linSlope[4097] = {0, 15, 31, 47, 63, 79, 95, 111, 127, 143, 159, 175, 191, 207, 223, 239, 255, 271, 287, 303, 319, 335, 351, 367, 383, 399, 415, 431, 447, 463, 479, 495, 511, 527, 543, 559, 575, 591, 607, 623, 639, 655, 671, 687, 703, 719, 735, 751, 767, 783, 799, 815, 831, 847, 863, 879, 895, 911, 927, 943, 959, 975, 991, 1007, 1023, 1039, 1055, 1071, 1087, 1103, 1119, 1135, 1151, 1167, 1183, 1199, 1215, 1231, 1247, 1263, 1279, 1295, 1311, 1327, 1343, 1359, 1375, 1391, 1407, 1423, 1439, 1455, 1471, 1487, 1503, 1519, 1535, 1551, 1567, 1583, 1599, 1615, 1631, 1647, 1663, 1679, 1695, 1711, 1727, 1743, 1759, 1775, 1791, 1807, 1823, 1839, 1855, 1871, 1887, 1903, 1919, 1935, 1951, 1967, 1983, 1999, 2015, 2031, 2047, 2063, 2079, 2095, 2111, 2127, 2143, 2159, 2175, 2191, 2207, 2223, 2239, 2255, 2271, 2287, 2303, 2319, 2335, 2351, 2367, 2383, 2399, 2415, 2431, 2447, 2463, 2479, 2495, 2511, 2527, 2543, 2559, 2575, 2591, 2607, 2623, 2639, 2655, 2671, 2687, 2703, 2719, 2735, 2751, 2767, 2783, 2799, 2815, 2831, 2847, 2863, 2879, 2895, 2911, 2927, 2943, 2959, 2975, 2991, 3007, 3023, 3039, 3055, 3071, 3087, 3103, 3119, 3135, 3151, 3167, 3183, 3199, 3215, 3231, 3247, 3263, 3279, 3295, 3311, 3327, 3343, 3359, 3375, 3391, 3407, 3423, 3439, 3455, 3471, 3487, 3503, 3519, 3535, 3551, 3567, 3583, 3599, 3615, 3631, 3647, 3663, 3679, 3695, 3711, 3727, 3743, 3759, 3775, 3791, 3807, 3823, 3839, 3855, 3871, 3887, 3903, 3919, 3935, 3951, 3967, 3983, 3999, 4015, 4031, 4047, 4063, 4079, 4095, 4111, 4127, 4143, 4159, 4175, 4191, 4207, 4223, 4239, 4255, 4271, 4287, 4303, 4319, 4335, 4351, 4367, 4383, 4399, 4415, 4431, 4447, 4463, 4479, 4495, 4511, 4527, 4543, 4559, 4575, 4591, 4607, 4623, 4639, 4655, 4671, 4687, 4703, 4719, 4735, 4751, 4767, 4783, 4799, 4815, 4831, 4847, 4863, 4879, 4895, 4911, 4927, 4943, 4959, 4975, 4991, 5007, 5023, 5039, 5055, 5071, 5087, 5103, 5119, 5135, 5151, 5167, 5183, 5199, 5215, 5231, 5247, 5263, 5279, 5295, 5311, 5327, 5343, 5359, 5375, 5391, 5407, 5423, 5439, 5455, 5471, 5487, 5503, 5519, 5535, 5551, 5567, 5583, 5599, 5615, 5631, 5647, 5663, 5679, 5695, 5711, 5727, 5743, 5759, 5775, 5791, 5807, 5823, 5839, 5855, 5871, 5887, 5903, 5919, 5935, 5951, 5967, 5983, 5999, 6015, 6031, 6047, 6063, 6079, 6095, 6111, 6127, 6143, 6159, 6175, 6191, 6207, 6223, 6239, 6255, 6271, 6287, 6303, 6319, 6335, 6351, 6367, 6383, 6399, 6415, 6431, 6447, 6463, 6479, 6495, 6511, 6527, 6543, 6559, 6575, 6591, 6607, 6623, 6639, 6655, 6671, 6687, 6703, 6719, 6735, 6751, 6767, 6783, 6799, 6815, 6831, 6847, 6863, 6879, 6895, 6911, 6927, 6943, 6959, 6975, 6991, 7007, 7023, 7039, 7055, 7071, 7087, 7103, 7119, 7135, 7151, 7167, 7183, 7199, 7215, 7231, 7247, 7263, 7279, 7295, 7311, 7327, 7343, 7359, 7375, 7391, 7407, 7423, 7439, 7455, 7471, 7487, 7503, 7519, 7535, 7551, 7567, 7583, 7599, 7615, 7631, 7647, 7663, 7679, 7695, 7711, 7727, 7743, 7759, 7775, 7791, 7807, 7823, 7839, 7855, 7871, 7887, 7903, 7919, 7935, 7951, 7967, 7983, 7999, 8015, 8031, 8047, 8063, 8079, 8095, 8111, 8127, 8143, 8159, 8175, 8191, 8207, 8223, 8239, 8255, 8271, 8287, 8303, 8319, 8335, 8351, 8367, 8383, 8399, 8415, 8431, 8447, 8463, 8479, 8495, 8511, 8527, 8543, 8559, 8575, 8591, 8607, 8623, 8639, 8655, 8671, 8687, 8703, 8719, 8735, 8751, 8767, 8783, 8799, 8815, 8831, 8847, 8863, 8879, 8895, 8911, 8927, 8943, 8959, 8975, 8991, 9007, 9023, 9039, 9055, 9071, 9087, 9103, 9119, 9135, 9151, 9167, 9183, 9199, 9215, 9231, 9247, 9263, 9279, 9295, 9311, 9327, 9343, 9359, 9375, 9391, 9407, 9423, 9439, 9455, 9471, 9487, 9503, 9519, 9535, 9551, 9567, 9583, 9599, 9615, 9631, 9647, 9663, 9679, 9695, 9711, 9727, 9743, 9759, 9775, 9791, 9807, 9823, 9839, 9855, 9871, 9887, 9903, 9919, 9935, 9951, 9967, 9983, 9999, 10015, 10031, 10047, 10063, 10079, 10095, 10111, 10127, 10143, 10159, 10175, 10191, 10207, 10223, 10239, 10255, 10271, 10287, 10303, 10319, 10335, 10351, 10367, 10383, 10399, 10415, 10431, 10447, 10463, 10479, 10495, 10511, 10527, 10543, 10559, 10575, 10591, 10607, 10623, 10639, 10655, 10671, 10687, 10703, 10719, 10735, 10751, 10767, 10783, 10799, 10815, 10831, 10847, 10863, 10879, 10895, 10911, 10927, 10943, 10959, 10975, 10991, 11007, 11023, 11039, 11055, 11071, 11087, 11103, 11119, 11135, 11151, 11167, 11183, 11199, 11215, 11231, 11247, 11263, 11279, 11295, 11311, 11327, 11343, 11359, 11375, 11391, 11407, 11423, 11439, 11455, 11471, 11487, 11503, 11519, 11535, 11551, 11567, 11583, 11599, 11615, 11631, 11647, 11663, 11679, 11695, 11711, 11727, 11743, 11759, 11775, 11791, 11807, 11823, 11839, 11855, 11871, 11887, 11903, 11919, 11935, 11951, 11967, 11983, 11999, 12015, 12031, 12047, 12063, 12079, 12095, 12111, 12127, 12143, 12159, 12175, 12191, 12207, 12223, 12239, 12255, 12271, 12287, 12303, 12319, 12335, 12351, 12367, 12383, 12399, 12415, 12431, 12447, 12463, 12479, 12495, 12511, 12527, 12543, 12559, 12575, 12591, 12607, 12623, 12639, 12655, 12671, 12687, 12703, 12719, 12735, 12751, 12767, 12783, 12799, 12815, 12831, 12847, 12863, 12879, 12895, 12911, 12927, 12943, 12959, 12975, 12991, 13007, 13023, 13039, 13055, 13071, 13087, 13103, 13119, 13135, 13151, 13167, 13183, 13199, 13215, 13231, 13247, 13263, 13279, 13295, 13311, 13327, 13343, 13359, 13375, 13391, 13407, 13423, 13439, 13455, 13471, 13487, 13503, 13519, 13535, 13551, 13567, 13583, 13599, 13615, 13631, 13647, 13663, 13679, 13695, 13711, 13727, 13743, 13759, 13775, 13791, 13807, 13823, 13839, 13855, 13871, 13887, 13903, 13919, 13935, 13951, 13967, 13983, 13999, 14015, 14031, 14047, 14063, 14079, 14095, 14111, 14127, 14143, 14159, 14175, 14191, 14207, 14223, 14239, 14255, 14271, 14287, 14303, 14319, 14335, 14351, 14367, 14383, 14399, 14415, 14431, 14447, 14463, 14479, 14495, 14511, 14527, 14543, 14559, 14575, 14591, 14607, 14623, 14639, 14655, 14671, 14687, 14703, 14719, 14735, 14751, 14767, 14783, 14799, 14815, 14831, 14847, 14863, 14879, 14895, 14911, 14927, 14943, 14959, 14975, 14991, 15007, 15023, 15039, 15055, 15071, 15087, 15103, 15119, 15135, 15151, 15167, 15183, 15199, 15215, 15231, 15247, 15263, 15279, 15295, 15311, 15327, 15343, 15359, 15375, 15391, 15407, 15423, 15439, 15455, 15471, 15487, 15503, 15519, 15535, 15551, 15567, 15583, 15599, 15615, 15631, 15647, 15663, 15679, 15695, 15711, 15727, 15743, 15759, 15775, 15791, 15807, 15823, 15839, 15855, 15871, 15887, 15903, 15919, 15935, 15951, 15967, 15983, 15999, 16015, 16031, 16047, 16063, 16079, 16095, 16111, 16127, 16143, 16159, 16175, 16191, 16207, 16223, 16239, 16255, 16271, 16287, 16303, 16319, 16335, 16351, 16367, 16383, 16399, 16415, 16431, 16447, 16463, 16479, 16495, 16511, 16527, 16543, 16559, 16575, 16591, 16607, 16623, 16639, 16655, 16671, 16687, 16703, 16719, 16735, 16751, 16767, 16783, 16799, 16815, 16831, 16847, 16863, 16879, 16895, 16911, 16927, 16943, 16959, 16975, 16991, 17007, 17023, 17039, 17055, 17071, 17087, 17103, 17119, 17135, 17151, 17167, 17183, 17199, 17215, 17231, 17247, 17263, 17279, 17295, 17311, 17327, 17343, 17359, 17375, 17391, 17407, 17423, 17439, 17455, 17471, 17487, 17503, 17519, 17535, 17551, 17567, 17583, 17599, 17615, 17631, 17647, 17663, 17679, 17695, 17711, 17727, 17743, 17759, 17775, 17791, 17807, 17823, 17839, 17855, 17871, 17887, 17903, 17919, 17935, 17951, 17967, 17983, 17999, 18015, 18031, 18047, 18063, 18079, 18095, 18111, 18127, 18143, 18159, 18175, 18191, 18207, 18223, 18239, 18255, 18271, 18287, 18303, 18319, 18335, 18351, 18367, 18383, 18399, 18415, 18431, 18447, 18463, 18479, 18495, 18511, 18527, 18543, 18559, 18575, 18591, 18607, 18623, 18639, 18655, 18671, 18687, 18703, 18719, 18735, 18751, 18767, 18783, 18799, 18815, 18831, 18847, 18863, 18879, 18895, 18911, 18927, 18943, 18959, 18975, 18991, 19007, 19023, 19039, 19055, 19071, 19087, 19103, 19119, 19135, 19151, 19167, 19183, 19199, 19215, 19231, 19247, 19263, 19279, 19295, 19311, 19327, 19343, 19359, 19375, 19391, 19407, 19423, 19439, 19455, 19471, 19487, 19503, 19519, 19535, 19551, 19567, 19583, 19599, 19615, 19631, 19647, 19663, 19679, 19695, 19711, 19727, 19743, 19759, 19775, 19791, 19807, 19823, 19839, 19855, 19871, 19887, 19903, 19919, 19935, 19951, 19967, 19983, 19999, 20015, 20031, 20047, 20063, 20079, 20095, 20111, 20127, 20143, 20159, 20175, 20191, 20207, 20223, 20239, 20255, 20271, 20287, 20303, 20319, 20335, 20351, 20367, 20383, 20399, 20415, 20431, 20447, 20463, 20479, 20495, 20511, 20527, 20543, 20559, 20575, 20591, 20607, 20623, 20639, 20655, 20671, 20687, 20703, 20719, 20735, 20751, 20767, 20783, 20799, 20815, 20831, 20847, 20863, 20879, 20895, 20911, 20927, 20943, 20959, 20975, 20991, 21007, 21023, 21039, 21055, 21071, 21087, 21103, 21119, 21135, 21151, 21167, 21183, 21199, 21215, 21231, 21247, 21263, 21279, 21295, 21311, 21327, 21343, 21359, 21375, 21391, 21407, 21423, 21439, 21455, 21471, 21487, 21503, 21519, 21535, 21551, 21567, 21583, 21599, 21615, 21631, 21647, 21663, 21679, 21695, 21711, 21727, 21743, 21759, 21775, 21791, 21807, 21823, 21839, 21855, 21871, 21887, 21903, 21919, 21935, 21951, 21967, 21983, 21999, 22015, 22031, 22047, 22063, 22079, 22095, 22111, 22127, 22143, 22159, 22175, 22191, 22207, 22223, 22239, 22255, 22271, 22287, 22303, 22319, 22335, 22351, 22367, 22383, 22399, 22415, 22431, 22447, 22463, 22479, 22495, 22511, 22527, 22543, 22559, 22575, 22591, 22607, 22623, 22639, 22655, 22671, 22687, 22703, 22719, 22735, 22751, 22767, 22783, 22799, 22815, 22831, 22847, 22863, 22879, 22895, 22911, 22927, 22943, 22959, 22975, 22991, 23007, 23023, 23039, 23055, 23071, 23087, 23103, 23119, 23135, 23151, 23167, 23183, 23199, 23215, 23231, 23247, 23263, 23279, 23295, 23311, 23327, 23343, 23359, 23375, 23391, 23407, 23423, 23439, 23455, 23471, 23487, 23503, 23519, 23535, 23551, 23567, 23583, 23599, 23615, 23631, 23647, 23663, 23679, 23695, 23711, 23727, 23743, 23759, 23775, 23791, 23807, 23823, 23839, 23855, 23871, 23887, 23903, 23919, 23935, 23951, 23967, 23983, 23999, 24015, 24031, 24047, 24063, 24079, 24095, 24111, 24127, 24143, 24159, 24175, 24191, 24207, 24223, 24239, 24255, 24271, 24287, 24303, 24319, 24335, 24351, 24367, 24383, 24399, 24415, 24431, 24447, 24463, 24479, 24495, 24511, 24527, 24543, 24559, 24575, 24591, 24607, 24623, 24639, 24655, 24671, 24687, 24703, 24719, 24735, 24751, 24767, 24783, 24799, 24815, 24831, 24847, 24863, 24879, 24895, 24911, 24927, 24943, 24959, 24975, 24991, 25007, 25023, 25039, 25055, 25071, 25087, 25103, 25119, 25135, 25151, 25167, 25183, 25199, 25215, 25231, 25247, 25263, 25279, 25295, 25311, 25327, 25343, 25359, 25375, 25391, 25407, 25423, 25439, 25455, 25471, 25487, 25503, 25519, 25535, 25551, 25567, 25583, 25599, 25615, 25631, 25647, 25663, 25679, 25695, 25711, 25727, 25743, 25759, 25775, 25791, 25807, 25823, 25839, 25855, 25871, 25887, 25903, 25919, 25935, 25951, 25967, 25983, 25999, 26015, 26031, 26047, 26063, 26079, 26095, 26111, 26127, 26143, 26159, 26175, 26191, 26207, 26223, 26239, 26255, 26271, 26287, 26303, 26319, 26335, 26351, 26367, 26383, 26399, 26415, 26431, 26447, 26463, 26479, 26495, 26511, 26527, 26543, 26559, 26575, 26591, 26607, 26623, 26639, 26655, 26671, 26687, 26703, 26719, 26735, 26751, 26767, 26783, 26799, 26815, 26831, 26847, 26863, 26879, 26895, 26911, 26927, 26943, 26959, 26975, 26991, 27007, 27023, 27039, 27055, 27071, 27087, 27103, 27119, 27135, 27151, 27167, 27183, 27199, 27215, 27231, 27247, 27263, 27279, 27295, 27311, 27327, 27343, 27359, 27375, 27391, 27407, 27423, 27439, 27455, 27471, 27487, 27503, 27519, 27535, 27551, 27567, 27583, 27599, 27615, 27631, 27647, 27663, 27679, 27695, 27711, 27727, 27743, 27759, 27775, 27791, 27807, 27823, 27839, 27855, 27871, 27887, 27903, 27919, 27935, 27951, 27967, 27983, 27999, 28015, 28031, 28047, 28063, 28079, 28095, 28111, 28127, 28143, 28159, 28175, 28191, 28207, 28223, 28239, 28255, 28271, 28287, 28303, 28319, 28335, 28351, 28367, 28383, 28399, 28415, 28431, 28447, 28463, 28479, 28495, 28511, 28527, 28543, 28559, 28575, 28591, 28607, 28623, 28639, 28655, 28671, 28687, 28703, 28719, 28735, 28751, 28767, 28783, 28799, 28815, 28831, 28847, 28863, 28879, 28895, 28911, 28927, 28943, 28959, 28975, 28991, 29007, 29023, 29039, 29055, 29071, 29087, 29103, 29119, 29135, 29151, 29167, 29183, 29199, 29215, 29231, 29247, 29263, 29279, 29295, 29311, 29327, 29343, 29359, 29375, 29391, 29407, 29423, 29439, 29455, 29471, 29487, 29503, 29519, 29535, 29551, 29567, 29583, 29599, 29615, 29631, 29647, 29663, 29679, 29695, 29711, 29727, 29743, 29759, 29775, 29791, 29807, 29823, 29839, 29855, 29871, 29887, 29903, 29919, 29935, 29951, 29967, 29983, 29999, 30015, 30031, 30047, 30063, 30079, 30095, 30111, 30127, 30143, 30159, 30175, 30191, 30207, 30223, 30239, 30255, 30271, 30287, 30303, 30319, 30335, 30351, 30367, 30383, 30399, 30415, 30431, 30447, 30463, 30479, 30495, 30511, 30527, 30543, 30559, 30575, 30591, 30607, 30623, 30639, 30655, 30671, 30687, 30703, 30719, 30735, 30751, 30767, 30783, 30799, 30815, 30831, 30847, 30863, 30879, 30895, 30911, 30927, 30943, 30959, 30975, 30991, 31007, 31023, 31039, 31055, 31071, 31087, 31103, 31119, 31135, 31151, 31167, 31183, 31199, 31215, 31231, 31247, 31263, 31279, 31295, 31311, 31327, 31343, 31359, 31375, 31391, 31407, 31423, 31439, 31455, 31471, 31487, 31503, 31519, 31535, 31551, 31567, 31583, 31599, 31615, 31631, 31647, 31663, 31679, 31695, 31711, 31727, 31743, 31759, 31775, 31791, 31807, 31823, 31839, 31855, 31871, 31887, 31903, 31919, 31935, 31951, 31967, 31983, 31999, 32015, 32031, 32047, 32063, 32079, 32095, 32111, 32127, 32143, 32159, 32175, 32191, 32207, 32223, 32239, 32255, 32271, 32287, 32303, 32319, 32335, 32351, 32367, 32383, 32399, 32415, 32431, 32447, 32463, 32479, 32495, 32511, 32527, 32543, 32559, 32575, 32591, 32607, 32623, 32639, 32655, 32671, 32687, 32703, 32719, 32735, 32751, 32767, 32783, 32799, 32815, 32831, 32847, 32863, 32879, 32895, 32911, 32927, 32943, 32959, 32975, 32991, 33007, 33023, 33039, 33055, 33071, 33087, 33103, 33119, 33135, 33151, 33167, 33183, 33199, 33215, 33231, 33247, 33263, 33279, 33295, 33311, 33327, 33343, 33359, 33375, 33391, 33407, 33423, 33439, 33455, 33471, 33487, 33503, 33519, 33535, 33551, 33567, 33583, 33599, 33615, 33631, 33647, 33663, 33679, 33695, 33711, 33727, 33743, 33759, 33775, 33791, 33807, 33823, 33839, 33855, 33871, 33887, 33903, 33919, 33935, 33951, 33967, 33983, 33999, 34015, 34031, 34047, 34063, 34079, 34095, 34111, 34127, 34143, 34159, 34175, 34191, 34207, 34223, 34239, 34255, 34271, 34287, 34303, 34319, 34335, 34351, 34367, 34383, 34399, 34415, 34431, 34447, 34463, 34479, 34495, 34511, 34527, 34543, 34559, 34575, 34591, 34607, 34623, 34639, 34655, 34671, 34687, 34703, 34719, 34735, 34751, 34767, 34783, 34799, 34815, 34831, 34847, 34863, 34879, 34895, 34911, 34927, 34943, 34959, 34975, 34991, 35007, 35023, 35039, 35055, 35071, 35087, 35103, 35119, 35135, 35151, 35167, 35183, 35199, 35215, 35231, 35247, 35263, 35279, 35295, 35311, 35327, 35343, 35359, 35375, 35391, 35407, 35423, 35439, 35455, 35471, 35487, 35503, 35519, 35535, 35551, 35567, 35583, 35599, 35615, 35631, 35647, 35663, 35679, 35695, 35711, 35727, 35743, 35759, 35775, 35791, 35807, 35823, 35839, 35855, 35871, 35887, 35903, 35919, 35935, 35951, 35967, 35983, 35999, 36015, 36031, 36047, 36063, 36079, 36095, 36111, 36127, 36143, 36159, 36175, 36191, 36207, 36223, 36239, 36255, 36271, 36287, 36303, 36319, 36335, 36351, 36367, 36383, 36399, 36415, 36431, 36447, 36463, 36479, 36495, 36511, 36527, 36543, 36559, 36575, 36591, 36607, 36623, 36639, 36655, 36671, 36687, 36703, 36719, 36735, 36751, 36767, 36783, 36799, 36815, 36831, 36847, 36863, 36879, 36895, 36911, 36927, 36943, 36959, 36975, 36991, 37007, 37023, 37039, 37055, 37071, 37087, 37103, 37119, 37135, 37151, 37167, 37183, 37199, 37215, 37231, 37247, 37263, 37279, 37295, 37311, 37327, 37343, 37359, 37375, 37391, 37407, 37423, 37439, 37455, 37471, 37487, 37503, 37519, 37535, 37551, 37567, 37583, 37599, 37615, 37631, 37647, 37663, 37679, 37695, 37711, 37727, 37743, 37759, 37775, 37791, 37807, 37823, 37839, 37855, 37871, 37887, 37903, 37919, 37935, 37951, 37967, 37983, 37999, 38015, 38031, 38047, 38063, 38079, 38095, 38111, 38127, 38143, 38159, 38175, 38191, 38207, 38223, 38239, 38255, 38271, 38287, 38303, 38319, 38335, 38351, 38367, 38383, 38399, 38415, 38431, 38447, 38463, 38479, 38495, 38511, 38527, 38543, 38559, 38575, 38591, 38607, 38623, 38639, 38655, 38671, 38687, 38703, 38719, 38735, 38751, 38767, 38783, 38799, 38815, 38831, 38847, 38863, 38879, 38895, 38911, 38927, 38943, 38959, 38975, 38991, 39007, 39023, 39039, 39055, 39071, 39087, 39103, 39119, 39135, 39151, 39167, 39183, 39199, 39215, 39231, 39247, 39263, 39279, 39295, 39311, 39327, 39343, 39359, 39375, 39391, 39407, 39423, 39439, 39455, 39471, 39487, 39503, 39519, 39535, 39551, 39567, 39583, 39599, 39615, 39631, 39647, 39663, 39679, 39695, 39711, 39727, 39743, 39759, 39775, 39791, 39807, 39823, 39839, 39855, 39871, 39887, 39903, 39919, 39935, 39951, 39967, 39983, 39999, 40015, 40031, 40047, 40063, 40079, 40095, 40111, 40127, 40143, 40159, 40175, 40191, 40207, 40223, 40239, 40255, 40271, 40287, 40303, 40319, 40335, 40351, 40367, 40383, 40399, 40415, 40431, 40447, 40463, 40479, 40495, 40511, 40527, 40543, 40559, 40575, 40591, 40607, 40623, 40639, 40655, 40671, 40687, 40703, 40719, 40735, 40751, 40767, 40783, 40799, 40815, 40831, 40847, 40863, 40879, 40895, 40911, 40927, 40943, 40959, 40975, 40991, 41007, 41023, 41039, 41055, 41071, 41087, 41103, 41119, 41135, 41151, 41167, 41183, 41199, 41215, 41231, 41247, 41263, 41279, 41295, 41311, 41327, 41343, 41359, 41375, 41391, 41407, 41423, 41439, 41455, 41471, 41487, 41503, 41519, 41535, 41551, 41567, 41583, 41599, 41615, 41631, 41647, 41663, 41679, 41695, 41711, 41727, 41743, 41759, 41775, 41791, 41807, 41823, 41839, 41855, 41871, 41887, 41903, 41919, 41935, 41951, 41967, 41983, 41999, 42015, 42031, 42047, 42063, 42079, 42095, 42111, 42127, 42143, 42159, 42175, 42191, 42207, 42223, 42239, 42255, 42271, 42287, 42303, 42319, 42335, 42351, 42367, 42383, 42399, 42415, 42431, 42447, 42463, 42479, 42495, 42511, 42527, 42543, 42559, 42575, 42591, 42607, 42623, 42639, 42655, 42671, 42687, 42703, 42719, 42735, 42751, 42767, 42783, 42799, 42815, 42831, 42847, 42863, 42879, 42895, 42911, 42927, 42943, 42959, 42975, 42991, 43007, 43023, 43039, 43055, 43071, 43087, 43103, 43119, 43135, 43151, 43167, 43183, 43199, 43215, 43231, 43247, 43263, 43279, 43295, 43311, 43327, 43343, 43359, 43375, 43391, 43407, 43423, 43439, 43455, 43471, 43487, 43503, 43519, 43535, 43551, 43567, 43583, 43599, 43615, 43631, 43647, 43663, 43679, 43695, 43711, 43727, 43743, 43759, 43775, 43791, 43807, 43823, 43839, 43855, 43871, 43887, 43903, 43919, 43935, 43951, 43967, 43983, 43999, 44015, 44031, 44047, 44063, 44079, 44095, 44111, 44127, 44143, 44159, 44175, 44191, 44207, 44223, 44239, 44255, 44271, 44287, 44303, 44319, 44335, 44351, 44367, 44383, 44399, 44415, 44431, 44447, 44463, 44479, 44495, 44511, 44527, 44543, 44559, 44575, 44591, 44607, 44623, 44639, 44655, 44671, 44687, 44703, 44719, 44735, 44751, 44767, 44783, 44799, 44815, 44831, 44847, 44863, 44879, 44895, 44911, 44927, 44943, 44959, 44975, 44991, 45007, 45023, 45039, 45055, 45071, 45087, 45103, 45119, 45135, 45151, 45167, 45183, 45199, 45215, 45231, 45247, 45263, 45279, 45295, 45311, 45327, 45343, 45359, 45375, 45391, 45407, 45423, 45439, 45455, 45471, 45487, 45503, 45519, 45535, 45551, 45567, 45583, 45599, 45615, 45631, 45647, 45663, 45679, 45695, 45711, 45727, 45743, 45759, 45775, 45791, 45807, 45823, 45839, 45855, 45871, 45887, 45903, 45919, 45935, 45951, 45967, 45983, 45999, 46015, 46031, 46047, 46063, 46079, 46095, 46111, 46127, 46143, 46159, 46175, 46191, 46207, 46223, 46239, 46255, 46271, 46287, 46303, 46319, 46335, 46351, 46367, 46383, 46399, 46415, 46431, 46447, 46463, 46479, 46495, 46511, 46527, 46543, 46559, 46575, 46591, 46607, 46623, 46639, 46655, 46671, 46687, 46703, 46719, 46735, 46751, 46767, 46783, 46799, 46815, 46831, 46847, 46863, 46879, 46895, 46911, 46927, 46943, 46959, 46975, 46991, 47007, 47023, 47039, 47055, 47071, 47087, 47103, 47119, 47135, 47151, 47167, 47183, 47199, 47215, 47231, 47247, 47263, 47279, 47295, 47311, 47327, 47343, 47359, 47375, 47391, 47407, 47423, 47439, 47455, 47471, 47487, 47503, 47519, 47535, 47551, 47567, 47583, 47599, 47615, 47631, 47647, 47663, 47679, 47695, 47711, 47727, 47743, 47759, 47775, 47791, 47807, 47823, 47839, 47855, 47871, 47887, 47903, 47919, 47935, 47951, 47967, 47983, 47999, 48015, 48031, 48047, 48063, 48079, 48095, 48111, 48127, 48143, 48159, 48175, 48191, 48207, 48223, 48239, 48255, 48271, 48287, 48303, 48319, 48335, 48351, 48367, 48383, 48399, 48415, 48431, 48447, 48463, 48479, 48495, 48511, 48527, 48543, 48559, 48575, 48591, 48607, 48623, 48639, 48655, 48671, 48687, 48703, 48719, 48735, 48751, 48767, 48783, 48799, 48815, 48831, 48847, 48863, 48879, 48895, 48911, 48927, 48943, 48959, 48975, 48991, 49007, 49023, 49039, 49055, 49071, 49087, 49103, 49119, 49135, 49151, 49167, 49183, 49199, 49215, 49231, 49247, 49263, 49279, 49295, 49311, 49327, 49343, 49359, 49375, 49391, 49407, 49423, 49439, 49455, 49471, 49487, 49503, 49519, 49535, 49551, 49567, 49583, 49599, 49615, 49631, 49647, 49663, 49679, 49695, 49711, 49727, 49743, 49759, 49775, 49791, 49807, 49823, 49839, 49855, 49871, 49887, 49903, 49919, 49935, 49951, 49967, 49983, 49999, 50015, 50031, 50047, 50063, 50079, 50095, 50111, 50127, 50143, 50159, 50175, 50191, 50207, 50223, 50239, 50255, 50271, 50287, 50303, 50319, 50335, 50351, 50367, 50383, 50399, 50415, 50431, 50447, 50463, 50479, 50495, 50511, 50527, 50543, 50559, 50575, 50591, 50607, 50623, 50639, 50655, 50671, 50687, 50703, 50719, 50735, 50751, 50767, 50783, 50799, 50815, 50831, 50847, 50863, 50879, 50895, 50911, 50927, 50943, 50959, 50975, 50991, 51007, 51023, 51039, 51055, 51071, 51087, 51103, 51119, 51135, 51151, 51167, 51183, 51199, 51215, 51231, 51247, 51263, 51279, 51295, 51311, 51327, 51343, 51359, 51375, 51391, 51407, 51423, 51439, 51455, 51471, 51487, 51503, 51519, 51535, 51551, 51567, 51583, 51599, 51615, 51631, 51647, 51663, 51679, 51695, 51711, 51727, 51743, 51759, 51775, 51791, 51807, 51823, 51839, 51855, 51871, 51887, 51903, 51919, 51935, 51951, 51967, 51983, 51999, 52015, 52031, 52047, 52063, 52079, 52095, 52111, 52127, 52143, 52159, 52175, 52191, 52207, 52223, 52239, 52255, 52271, 52287, 52303, 52319, 52335, 52351, 52367, 52383, 52399, 52415, 52431, 52447, 52463, 52479, 52495, 52511, 52527, 52543, 52559, 52575, 52591, 52607, 52623, 52639, 52655, 52671, 52687, 52703, 52719, 52735, 52751, 52767, 52783, 52799, 52815, 52831, 52847, 52863, 52879, 52895, 52911, 52927, 52943, 52959, 52975, 52991, 53007, 53023, 53039, 53055, 53071, 53087, 53103, 53119, 53135, 53151, 53167, 53183, 53199, 53215, 53231, 53247, 53263, 53279, 53295, 53311, 53327, 53343, 53359, 53375, 53391, 53407, 53423, 53439, 53455, 53471, 53487, 53503, 53519, 53535, 53551, 53567, 53583, 53599, 53615, 53631, 53647, 53663, 53679, 53695, 53711, 53727, 53743, 53759, 53775, 53791, 53807, 53823, 53839, 53855, 53871, 53887, 53903, 53919, 53935, 53951, 53967, 53983, 53999, 54015, 54031, 54047, 54063, 54079, 54095, 54111, 54127, 54143, 54159, 54175, 54191, 54207, 54223, 54239, 54255, 54271, 54287, 54303, 54319, 54335, 54351, 54367, 54383, 54399, 54415, 54431, 54447, 54463, 54479, 54495, 54511, 54527, 54543, 54559, 54575, 54591, 54607, 54623, 54639, 54655, 54671, 54687, 54703, 54719, 54735, 54751, 54767, 54783, 54799, 54815, 54831, 54847, 54863, 54879, 54895, 54911, 54927, 54943, 54959, 54975, 54991, 55007, 55023, 55039, 55055, 55071, 55087, 55103, 55119, 55135, 55151, 55167, 55183, 55199, 55215, 55231, 55247, 55263, 55279, 55295, 55311, 55327, 55343, 55359, 55375, 55391, 55407, 55423, 55439, 55455, 55471, 55487, 55503, 55519, 55535, 55551, 55567, 55583, 55599, 55615, 55631, 55647, 55663, 55679, 55695, 55711, 55727, 55743, 55759, 55775, 55791, 55807, 55823, 55839, 55855, 55871, 55887, 55903, 55919, 55935, 55951, 55967, 55983, 55999, 56015, 56031, 56047, 56063, 56079, 56095, 56111, 56127, 56143, 56159, 56175, 56191, 56207, 56223, 56239, 56255, 56271, 56287, 56303, 56319, 56335, 56351, 56367, 56383, 56399, 56415, 56431, 56447, 56463, 56479, 56495, 56511, 56527, 56543, 56559, 56575, 56591, 56607, 56623, 56639, 56655, 56671, 56687, 56703, 56719, 56735, 56751, 56767, 56783, 56799, 56815, 56831, 56847, 56863, 56879, 56895, 56911, 56927, 56943, 56959, 56975, 56991, 57007, 57023, 57039, 57055, 57071, 57087, 57103, 57119, 57135, 57151, 57167, 57183, 57199, 57215, 57231, 57247, 57263, 57279, 57295, 57311, 57327, 57343, 57359, 57375, 57391, 57407, 57423, 57439, 57455, 57471, 57487, 57503, 57519, 57535, 57551, 57567, 57583, 57599, 57615, 57631, 57647, 57663, 57679, 57695, 57711, 57727, 57743, 57759, 57775, 57791, 57807, 57823, 57839, 57855, 57871, 57887, 57903, 57919, 57935, 57951, 57967, 57983, 57999, 58015, 58031, 58047, 58063, 58079, 58095, 58111, 58127, 58143, 58159, 58175, 58191, 58207, 58223, 58239, 58255, 58271, 58287, 58303, 58319, 58335, 58351, 58367, 58383, 58399, 58415, 58431, 58447, 58463, 58479, 58495, 58511, 58527, 58543, 58559, 58575, 58591, 58607, 58623, 58639, 58655, 58671, 58687, 58703, 58719, 58735, 58751, 58767, 58783, 58799, 58815, 58831, 58847, 58863, 58879, 58895, 58911, 58927, 58943, 58959, 58975, 58991, 59007, 59023, 59039, 59055, 59071, 59087, 59103, 59119, 59135, 59151, 59167, 59183, 59199, 59215, 59231, 59247, 59263, 59279, 59295, 59311, 59327, 59343, 59359, 59375, 59391, 59407, 59423, 59439, 59455, 59471, 59487, 59503, 59519, 59535, 59551, 59567, 59583, 59599, 59615, 59631, 59647, 59663, 59679, 59695, 59711, 59727, 59743, 59759, 59775, 59791, 59807, 59823, 59839, 59855, 59871, 59887, 59903, 59919, 59935, 59951, 59967, 59983, 59999, 60015, 60031, 60047, 60063, 60079, 60095, 60111, 60127, 60143, 60159, 60175, 60191, 60207, 60223, 60239, 60255, 60271, 60287, 60303, 60319, 60335, 60351, 60367, 60383, 60399, 60415, 60431, 60447, 60463, 60479, 60495, 60511, 60527, 60543, 60559, 60575, 60591, 60607, 60623, 60639, 60655, 60671, 60687, 60703, 60719, 60735, 60751, 60767, 60783, 60799, 60815, 60831, 60847, 60863, 60879, 60895, 60911, 60927, 60943, 60959, 60975, 60991, 61007, 61023, 61039, 61055, 61071, 61087, 61103, 61119, 61135, 61151, 61167, 61183, 61199, 61215, 61231, 61247, 61263, 61279, 61295, 61311, 61327, 61343, 61359, 61375, 61391, 61407, 61423, 61439, 61455, 61471, 61487, 61503, 61519, 61535, 61551, 61567, 61583, 61599, 61615, 61631, 61647, 61663, 61679, 61695, 61711, 61727, 61743, 61759, 61775, 61791, 61807, 61823, 61839, 61855, 61871, 61887, 61903, 61919, 61935, 61951, 61967, 61983, 61999, 62015, 62031, 62047, 62063, 62079, 62095, 62111, 62127, 62143, 62159, 62175, 62191, 62207, 62223, 62239, 62255, 62271, 62287, 62303, 62319, 62335, 62351, 62367, 62383, 62399, 62415, 62431, 62447, 62463, 62479, 62495, 62511, 62527, 62543, 62559, 62575, 62591, 62607, 62623, 62639, 62655, 62671, 62687, 62703, 62719, 62735, 62751, 62767, 62783, 62799, 62815, 62831, 62847, 62863, 62879, 62895, 62911, 62927, 62943, 62959, 62975, 62991, 63007, 63023, 63039, 63055, 63071, 63087, 63103, 63119, 63135, 63151, 63167, 63183, 63199, 63215, 63231, 63247, 63263, 63279, 63295, 63311, 63327, 63343, 63359, 63375, 63391, 63407, 63423, 63439, 63455, 63471, 63487, 63503, 63519, 63535, 63551, 63567, 63583, 63599, 63615, 63631, 63647, 63663, 63679, 63695, 63711, 63727, 63743, 63759, 63775, 63791, 63807, 63823, 63839, 63855, 63871, 63887, 63903, 63919, 63935, 63951, 63967, 63983, 63999, 64015, 64031, 64047, 64063, 64079, 64095, 64111, 64127, 64143, 64159, 64175, 64191, 64207, 64223, 64239, 64255, 64271, 64287, 64303, 64319, 64335, 64351, 64367, 64383, 64399, 64415, 64431, 64447, 64463, 64479, 64495, 64511, 64527, 64543, 64559, 64575, 64591, 64607, 64623, 64639, 64655, 64671, 64687, 64703, 64719, 64735, 64751, 64767, 64783, 64799, 64815, 64831, 64847, 64863, 64879, 64895, 64911, 64927, 64943, 64959, 64975, 64991, 65007, 65023, 65039, 65055, 65071, 65087, 65103, 65119, 65135, 65151, 65167, 65183, 65199, 65215, 65231, 65247, 65263, 65279, 65295, 65311, 65327, 65343, 65359, 65375, 65391, 65407, 65423, 65439, 65455, 65471, 65487, 65503, 65519, 65535};

	int32_t * aSlope = (int32_t *) linSlope;
	int32_t * dSlope = (int32_t *) expoSlope;
	int32_t * rSlope = (int32_t *) expoSlope;

	int32_t evaluateA(int32_t phase) {

		int32_t index = phase >> 16;
		int32_t fractional = phase & 0xFFFF;
		int32_t leftSample = *(aSlope + index);
		int32_t difference = *(aSlope + index + 1) - leftSample;

		return leftSample + fix16_mul(difference, fractional);
	}

	int32_t evaluateD(int32_t phase) {

		int32_t index = phase >> 16;
		int32_t fractional = phase & 0xFFFF;
		int32_t leftSample = *(dSlope + index);
		int32_t difference = *(dSlope + index + 1) - leftSample;

		return leftSample + fix16_mul(difference, fractional);
	}

	int32_t evaluateR(int32_t phase) {

		int32_t index = phase >> 16;
		int32_t fractional = phase & 0xFFFF;
		int32_t leftSample = *(rSlope + index);
		int32_t difference = *(rSlope + index + 1) - leftSample;

		return leftSample + fix16_mul(difference, fractional);
	}

	/// Fill the dac buffers with fixed outputs.
	void render(int32_t writePosition);

	class AdsrState {

	public:

		int32_t attackIncrement = 0;
		int32_t decayIncrement = 0;
		int32_t releaseIncrement = 0;

		int32_t aLevel = 0;
		int32_t bLevel = 0;
		int32_t aScale = 0;
		int32_t bScale = 0;

		int32_t phase = 0;

		virtual void step() {}
		virtual void processGateHigh() {}
		virtual void processGateLow() {}

	};

	AdsrState * adsrState;

	class Resting: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase = 0;
			aLevel = 0;
			bLevel = 0;
		}
		void processGateHigh(void) override {
			module.adsrState = &module.attack;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = 0;
			module.adsrState->bLevel = 0;
			module.attacking = 1;
		}

		/// Define the pointer to the outer class.
		Resting(ViaAdsr& x): module(x) {}

	};

	class Attack: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += attackIncrement;
			if (phase >= 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.decay;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 65535;
				module.adsrState->bLevel = 0;
				module.attacking = 0;
				module.decaying = 1;
			} else {
				aLevel = module.evaluateA(phase);
				bLevel = 0;
			}

		}
		void processGateLow(void) override {
			module.adsrState = &module.releaseFromA;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->aScale = aLevel;
			module.adsrState->bLevel = 0;
			module.attacking = 0;
			module.releasing = 1;
		}

		/// Define the pointer to the outer class.
		Attack(ViaAdsr& x): module(x) {}

	};

	class Decay: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += decayIncrement;
			if (phase > 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.sustain;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 0;
				module.adsrState->bLevel = 65535;
				module.decaying = 0;
				module.sustaining = 1;
			} else {
				aLevel = module.evaluateD(MAX_PHASE - phase);
				bLevel = 65535 - aLevel;
			}

		}

		void processGateHigh(void) override {
			module.adsrState = &module.retrigger;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->bLevel = bLevel;
			module.adsrState->aScale = aLevel;
			module.adsrState->bScale = bLevel;
			module.decaying = 0;
			module.attacking = 1;
		}

		void processGateLow(void) override {
			module.adsrState = &module.releaseFromD;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->aScale = aLevel;
			module.adsrState->bScale = bLevel;
			module.adsrState->bLevel = bLevel;
			module.decaying = 0;
			module.releasing = 1;
		}

		/// Define the pointer to the outer class.
		Decay(ViaAdsr& x): module(x) {}

	};

	class Sustain: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			aLevel = 0;
			bLevel = 65535;
		}

		void processGateHigh(void) override {
			module.adsrState = &module.retrigger;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = 0;
			module.adsrState->bLevel = 65535;
			module.adsrState->aScale = 0;
			module.adsrState->bScale = 65535;
			module.sustaining = 0;
			module.attacking = 1;
		}

		void processGateLow(void) override {
			module.adsrState = &module.releaseFromS;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = 0;
			module.adsrState->bLevel = 65535;
			module.sustaining = 0;
			module.releasing = 1;
		}

		/// Define the pointer to the outer class.
		Sustain(ViaAdsr& x): module(x) {}

	};

	class ReleaseFromA: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += releaseIncrement;
			if (phase > 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.resting;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 0;
				module.adsrState->bLevel = 0;
				module.releasing = 0;
			} else {
				aLevel = fix16_mul(aScale, module.evaluateR(MAX_PHASE - phase));
				bLevel = 0;
			}
		}
		void processGateHigh(void) override {
			module.adsrState = &module.retrigger;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->bLevel = 0;
			module.adsrState->aScale = aLevel;
			module.adsrState->bScale = 0;
			module.releasing = 0;
			module.attacking = 1;
		}

		/// Define the pointer to the outer class.
		ReleaseFromA(ViaAdsr& x): module(x) {}

	};

	class ReleaseFromD: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += releaseIncrement;
			if (phase > 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.resting;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 0;
				module.adsrState->bLevel = 0;
				module.releasing = 0;
			} else {
				aLevel = fix16_mul(aScale, module.evaluateR(MAX_PHASE - phase));
				bLevel = fix16_mul(bScale, module.evaluateR(MAX_PHASE - phase));
			}
		}
		void processGateHigh(void) override {
			module.adsrState = &module.retrigger;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->bLevel = bLevel;
			module.adsrState->aScale = aLevel;
			module.adsrState->bScale = bLevel;
			module.releasing = 0;
			module.attacking = 1;
		}

		/// Define the pointer to the outer class.
		ReleaseFromD(ViaAdsr& x): module(x) {}

	};

	class ReleaseFromS: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += releaseIncrement;
			if (phase > 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.resting;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 0;
				module.adsrState->bLevel = 0;
				module.releasing = 0;
			} else {
				aLevel = 0;
				bLevel = module.evaluateR(MAX_PHASE - phase);
			}
		}
		void processGateHigh(void) override {
			module.adsrState = &module.retrigger;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = 0;
			module.adsrState->bLevel = bLevel;
			module.adsrState->aScale = 0;
			module.adsrState->bScale = bLevel;
			module.releasing = 0;
			module.attacking = 1;
		}

		/// Define the pointer to the outer class.
		ReleaseFromS(ViaAdsr& x): module(x) {}

	};

	class Retrigger: public AdsrState {

	public:

		ViaAdsr& module;

		void step(void) override {
			phase += attackIncrement;
			if (phase > 0xFFFFFFF) {
				phase = 0xFFFFFFF;
				module.adsrState = &module.decay;
				module.adsrState->phase = 0;
				module.adsrState->aLevel = 65535;
				module.adsrState->bLevel = 0;
				module.attacking = 0;
				module.decaying = 1;
			} else {
				int32_t position = module.evaluateA(phase);
				aLevel = aScale + fix16_mul(65535 - aScale, module.evaluateA(phase));
				bLevel = fix16_mul(bScale, 65535 - position);
			}
		}
		void processGateLow(void) override {
			module.adsrState = &module.releaseFromD;
			module.adsrState->phase = 0;
			module.adsrState->aLevel = aLevel;
			module.adsrState->aScale = aLevel;
			module.adsrState->bLevel = bLevel;
			module.adsrState->bScale = bLevel;
			module.attacking = 0;
			module.releasing = 1;
		}

		/// Define the pointer to the outer class.
		Retrigger(ViaAdsr& x): module(x) {}

	};

	Resting resting;
	Attack attack;
	Decay decay;
	Sustain sustain;
	ReleaseFromS releaseFromS;
	ReleaseFromA releaseFromA;
	ReleaseFromD releaseFromD;
	Retrigger retrigger;

	int32_t releasing = 0;
	int32_t attacking = 0;
	int32_t decaying = 0;
	int32_t sustaining = 0;

	// random module utilities

	/// Instance of the exponential converter class.
	ExpoConverter expo;

	uint32_t pwmCounter = 0;

	int32_t gateOn = 0;
	int32_t buttonOn = 0;

	int32_t cycleTime = 0;

	int32_t * assignableLogic = &attacking;

	int32_t shOn = 0;

	int32_t attackTimeSample;
	int32_t decayTimeSample;
	int32_t releaseTimeSample;

	//@{
	/// Event handlers calling the corresponding methods from the state machine.
	void mainRisingEdgeCallback(void) {
		adsrState->processGateHigh();
		gateOn = 1;
	}
	void mainFallingEdgeCallback(void) {
		if (!buttonOn) {
			adsrState->processGateLow();
		}
		gateOn = 0;
	}
	void auxRisingEdgeCallback(void) {
		if (gateOn | buttonOn) {
			adsrState->processGateHigh();
		}
	}
	void auxFallingEdgeCallback(void) {
		// do nothing
	}
	void buttonPressedCallback(void) {
		adsrState->processGateHigh();
		buttonOn = 1;
	}
	void buttonReleasedCallback(void) {
		if (!gateOn) {
			adsrState->processGateLow();
		}
		buttonOn = 0;
	}
	void ioProcessCallback(void) {}
	void halfTransferCallback(void) {
		render(0);
	}
	void transferCompleteCallback(void) {
		render(VIA_ADSR_BUFFER_SIZE);
	}
	void slowConversionCallback(void) {

		controls.updateExtra();

		int32_t dMod = (int32_t) inputs.cv2Samples[0];
		int32_t rMod = (int32_t) inputs.cv3Samples[0];
		dMod += 32767;
		rMod += 32767;
		dMod >>= 4;
		rMod >>= 4;
		dMod = expo.convert(dMod) >> 5;
		rMod = expo.convert(rMod) >> 5;

		int32_t cycleMod;

		if (cycleTime) {
			cycleMod = expo.convert(controls.cv1Value) >> 5;
			dMod = fix16_mul(cycleMod, dMod);
			rMod = fix16_mul(cycleMod, rMod);
		} else {
			cycleMod = expo.convert(4095 - controls.cv1Value) >> 5;
		}

		adsrState->attackIncrement = __USAT(fix16_mul(cycleMod,
				expo.convert(4095 - controls.knob1Value) >> 6), 25);
		adsrState->decayIncrement = __USAT(fix16_mul(expo.convert(4095 - controls.knob2Value) >> 6,
				dMod), 25);
		adsrState->releaseIncrement = __USAT(fix16_mul(expo.convert(4095 - controls.knob3Value) >> 6,
				rMod), 25);
		setRedLED(adsrState->bLevel * runtimeDisplay);
		setBlueLED(adsrState->aLevel * runtimeDisplay);
		setGreenLED((adsrState->aLevel + adsrState->bLevel) * cycleTime * runtimeDisplay);

		if (shOn & attacking) {
			adsrState->attackIncrement = attackTimeSample;
		} else {
			attackTimeSample = adsrState->attackIncrement;
		}
		if (shOn & decaying) {
			adsrState->decayIncrement = decayTimeSample;
		} else {
			decayTimeSample = adsrState->decayIncrement;
		}
		if (shOn & releasing) {
			adsrState->releaseIncrement = releaseTimeSample;
		} else {
			releaseTimeSample = adsrState->releaseIncrement;
		}


	}
	void auxTimer1InterruptCallback(void) {

	}
	void auxTimer2InterruptCallback(void) {

	}

	int32_t numButton1Modes = 3;
	int32_t numButton2Modes = 2;
	int32_t numButton3Modes = 3;
	int32_t numButton4Modes = 2;
	int32_t numButton5Modes = 4;
	int32_t numButton6Modes = 3;

	void handleButton1ModeChange(int32_t);
	void handleButton2ModeChange(int32_t);
	void handleButton3ModeChange(int32_t);
	void handleButton4ModeChange(int32_t);
	void handleButton5ModeChange(int32_t);
	void handleButton6ModeChange(int32_t);

	/// On construction, call subclass constructors and pass each a pointer to the module class.
	ViaAdsr() : adsrUI(*this), attack(*this), decay(*this), sustain(*this), releaseFromA(*this),
			releaseFromD(*this), releaseFromS(*this), retrigger(*this), resting(*this) {

		/// Link the module GPIO registers.
		initializeAuxOutputs();

		/// Initialize the input stream buffers.
		inputs.init(VIA_ADSR_BUFFER_SIZE);
		/// Initialize the output stream buffers.
		outputs.init(VIA_ADSR_BUFFER_SIZE);
		/// Set the data members that will be used to determine DMA stream initialization in the hardware executable.
		outputBufferSize = VIA_ADSR_BUFFER_SIZE;
		inputBufferSize = 1;

		adsrState = &resting;

		/// Call the UI initialization that needs to happen after outer class construction.
		adsrUI.initialize();


	}

};

#endif

#endif /* INC_Calib_HPP_ */
